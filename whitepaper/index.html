<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nostra Technical Whitepaper - Market Models & Oracle Integration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="lang-switch">
                <a href="ko.html" class="lang-link">ğŸ‡°ğŸ‡· í•œêµ­ì–´</a>
            </div>
            <h1>Nostra Technical Whitepaper</h1>
            <p class="subtitle">Advanced Market Models & Chainlink Oracle Integration</p>
            <p class="author-info">By Jay Lee | December 2025</p>
        </header>

        <nav class="toc">
            <h2>Table of Contents</h2>
            <div class="toc-grid">
                <div>
                    <div class="toc-section-title">Part 1: Market Design Fundamentals</div>
                    <ul>
                        <li><a href="#market-structures">1.1 Market Structures</a></li>
                        <li><a href="#initial-probability">1.2 Initial Probability Settings</a></li>
                        <li><a href="#liquidity-provision">1.3 Liquidity Provision</a></li>
                        <li><a href="#stuck-inventory">1.4 Stuck Inventory Problem</a></li>
                        <li><a href="#market-makers">1.5 Market Makers</a></li>
                        <li><a href="#fee-structure">1.6 Fee Structure</a></li>
                        <li><a href="#amm-vs-orderbook">1.7 AMM vs Order Book</a></li>
                        <li><a href="#platform-economics">1.8 Platform Economics</a></li>
                        <li><a href="#implementation">1.9 Implementation Considerations</a></li>
                    </ul>
                </div>
                <div>
                    <div class="toc-section-title">Part 2: Market Models</div>
                    <ul>
                        <li><a href="#model-comparison">2.1 Model Comparison Overview</a></li>
                        <li><a href="#grouped-binary">2.2 Grouped Binary Model (Nostra)</a></li>
                        <li><a href="#liquidity-problem">2.3 Grouped Market Liquidity Problem</a></li>
                        <li><a href="#negrisk">2.4 NegRisk Adapter (Polymarket)</a></li>
                        <li><a href="#negrisk-conversion">2.5 NegRisk Conversion Mechanics</a></li>
                        <li><a href="#negrisk-arch">2.6 NegRisk Architecture</a></li>
                        <li><a href="#implementation-options">2.7 Implementation Options</a></li>
                    </ul>
                </div>
                <div>
                    <div class="toc-section-title">Part 3: Chainlink Integration</div>
                    <ul>
                        <li><a href="#why-chainlink">3.1 Why Chainlink for Resolution</a></li>
                        <li><a href="#chainlink-setup">3.2 Getting Started with Chainlink</a></li>
                        <li><a href="#long-tail-markets">3.3 Handling Long-tail Markets</a></li>
                        <li><a href="#chainlink-products">3.4 Chainlink Products Overview</a></li>
                        <li><a href="#resolution-arch">3.5 Resolution Architecture</a></li>
                        <li><a href="#smart-contracts">3.6 Smart Contract Integration</a></li>
                        <li><a href="#cost-security">3.7 Cost & Security</a></li>
                        <li><a href="#roadmap">3.8 Implementation Roadmap</a></li>
                    </ul>
                </div>
                <div>
                    <div class="toc-section-title">Part 4: Multi-Chain Strategy</div>
                    <ul>
                        <li><a href="#deployment-networks">4.1 Deployment Networks</a></li>
                        <li><a href="#bridging-strategy">4.2 Bridging Strategy (CCIP)</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- PART 0: MARKET DESIGN FUNDAMENTALS -->
        <div class="part-divider">
            <h2>Part 1: Market Design Fundamentals</h2>
            <span class="part-subtitle">Understanding Prediction Market Economics</span>
        </div>

        <!-- Section 0.1: Market Structures -->
        <section id="market-structures" class="part-1-section">
            <h3><span class="section-num part-1">1.1</span>Market Structures</h3>

            <h4>Two Main Approaches</h4>

            <div class="grid-2">
                <div class="card">
                    <h4><span class="label label-accent">50% Grouped Binary</span></h4>
                    <ul>
                        <li>Each outcome starts at 50% YES / 50% NO</li>
                        <li>Markets are independent (not linked)</li>
                        <li>Sum of YES can be anything (N Ã— 50%)</li>
                        <li>Converges to ~100% via arbitrage</li>
                        <li>Simple to implement</li>
                    </ul>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">5 outcomes at 50% each:
Sum = 250%
(Converges via trading)</pre>
                </div>

                <div class="card">
                    <h4><span class="label label-success">100/n% Binary Market</span></h4>
                    <ul>
                        <li>Each outcome starts at 100/N %</li>
                        <li>Can be independent OR mechanically linked (CTF)</li>
                        <li>Sum of YES = 100%</li>
                        <li>No initial arbitrage opportunity</li>
                        <li>Creator doesn't lose to arbitrageurs at start</li>
                    </ul>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">5 outcomes at 20% each:
Sum = 100%
(No arbitrage opportunity)</pre>
                </div>
            </div>

            <h4>Polymarket's Hybrid Approach (NegRisk CTF)</h4>

            <div class="box box-highlight">
                <span class="box-title">Different Structures for Different Markets</span>
                <ul>
                    <li><strong>High Volume Markets (e.g., Super Bowl)</strong>: NegRisk CTF - YES + NO = 100Â¢ per
                        outcome</li>
                    <li><strong>Low Volume Markets (e.g., CFP)</strong>: Grouped Binary - YES + NO â‰  100Â¢</li>
                </ul>
            </div>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">Super Bowl (NegRisk CTF):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team       â”‚ YES   â”‚ NO    â”‚ YES + NO â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chiefs     â”‚ 23Â¢   â”‚ 77Â¢   â”‚ 100Â¢ âœ“   â”‚
â”‚ Eagles     â”‚ 19Â¢   â”‚ 81Â¢   â”‚ 100Â¢ âœ“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CFP (Grouped Binary):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team       â”‚ YES   â”‚ NO    â”‚ YES + NO â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Indiana    â”‚ 93.4Â¢ â”‚ 99Â¢   â”‚ 192.4Â¢   â”‚
â”‚ Ohio State â”‚ 72Â¢   â”‚ 98Â¢   â”‚ 170Â¢     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        </section>

        <!-- Section 0.2: Initial Probability Settings -->
        <section id="initial-probability" class="part-1-section">
            <h3><span class="section-num part-1">1.2</span>Initial Probability Settings</h3>

            <h4>The Problem with 50% Initial Probability</h4>

            <div class="box box-danger">
                <span class="box-title">Arbitrage Loss</span>
                If each outcome starts at 50%, the sum exceeds 100%, creating a guaranteed profit for arbitrageurs at
                the creator's expense.
            </div>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">5 outcomes at 50% each:
Sum = 250%

Arbitrageurs:
- Buy all NO tokens
- Guaranteed profit when one outcome loses
- Creator loses to arbitrageurs</pre>

            <h4>Solution: 100/n% Initial Probability</h4>

            <div class="box box-success">
                <span class="box-title">No Arbitrage</span>
                Starting at 100/n% means sum = 100% from the start. No free money for arbitrageurs.
            </div>

            <h4>Critical Clarification: 250% Sum is NOT Arbitrage</h4>

            <div class="box box-warning">
                <span class="box-title">Common Misconception</span>
                The 250% sum (5 Ã— 50%) in grouped binary markets does NOT create arbitrage. Each market is independent!
            </div>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">Grouped Binary (5 outcomes Ã— 50%):

Market 1: Team A  YES (50Â¢) + NO (50Â¢) = $1 âœ“
Market 2: Team B  YES (50Â¢) + NO (50Â¢) = $1 âœ“
Market 3: Team C  YES (50Â¢) + NO (50Â¢) = $1 âœ“
Market 4: Team D  YES (50Â¢) + NO (50Â¢) = $1 âœ“
Market 5: Team E  YES (50Â¢) + NO (50Â¢) = $1 âœ“

Sum of YES = 250%... but so what?

Why no arbitrage?
â€¢ Each market is INDEPENDENT
â€¢ You CANNOT merge tokens across different markets
â€¢ Each market individually has YES + NO = $1 âœ“

The 250% â†’ 100% convergence is just PRICE DISCOVERY,
not arbitrage. Smart traders normalize it.</pre>

            <h4>What IS Real Arbitrage?</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Case</th>
                            <th>Condition</th>
                            <th>Action</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Single Market</td>
                            <td>YES + NO < $1</td>
                            <td>Buy both</td>
                            <td>Guaranteed profit</td>
                        </tr>
                        <tr>
                            <td>Single Market</td>
                            <td>YES + NO > $1</td>
                            <td>Mint & sell both</td>
                            <td>Guaranteed profit</td>
                        </tr>
                        <tr>
                            <td>CTF Multi-Outcome</td>
                            <td>Sum < $1</td>
                            <td>Buy all, merge</td>
                            <td>Guaranteed profit</td>
                        </tr>
                        <tr>
                            <td>CTF Multi-Outcome</td>
                            <td>Sum > $1</td>
                            <td>Split & sell all</td>
                            <td>Guaranteed profit</td>
                        </tr>
                        <tr>
                            <td>Cross-Platform</td>
                            <td>YES_A + NO_B < $1</td>
                            <td>Buy both sides</td>
                            <td>Guaranteed profit</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p><strong>Key:</strong> Arbitrage means <strong>zero risk, guaranteed profit</strong>. The 250% sum doesn't
                qualify.</p>

            <h4>Comparison: 5 Outcomes (True Probabilities: 60%, 15%, 10%, 10%, 5%)</h4>

            <div class="grid-2">
                <div class="card">
                    <h4>50% Initial (Sum = 250%)</h4>
                    <div class="table-wrapper">
                        <table>
                            <tr>
                                <th>Outcome</th>
                                <th>Initial</th>
                                <th>Fair</th>
                                <th>Gap</th>
                            </tr>
                            <tr>
                                <td>A (favorite)</td>
                                <td>50Â¢</td>
                                <td>60Â¢</td>
                                <td style="color: var(--danger);">-10Â¢</td>
                            </tr>
                            <tr>
                                <td>B</td>
                                <td>50Â¢</td>
                                <td>15Â¢</td>
                                <td style="color: var(--success);">+35Â¢</td>
                            </tr>
                            <tr>
                                <td>C</td>
                                <td>50Â¢</td>
                                <td>10Â¢</td>
                                <td style="color: var(--success);">+40Â¢</td>
                            </tr>
                            <tr>
                                <td>D</td>
                                <td>50Â¢</td>
                                <td>10Â¢</td>
                                <td style="color: var(--success);">+40Â¢</td>
                            </tr>
                            <tr>
                                <td>E</td>
                                <td>50Â¢</td>
                                <td>5Â¢</td>
                                <td style="color: var(--success);">+45Â¢</td>
                            </tr>
                        </table>
                    </div>
                    <p>Favorite: small underpricing (-10Â¢)<br>Underdogs: extreme overpricing (+35~45Â¢)</p>
                </div>

                <div class="card">
                    <h4>100/n% = 20% Initial (Sum = 100%)</h4>
                    <div class="table-wrapper">
                        <table>
                            <tr>
                                <th>Outcome</th>
                                <th>Initial</th>
                                <th>Fair</th>
                                <th>Gap</th>
                            </tr>
                            <tr>
                                <td>A (favorite)</td>
                                <td>20Â¢</td>
                                <td>60Â¢</td>
                                <td style="color: var(--danger);">-40Â¢</td>
                            </tr>
                            <tr>
                                <td>B</td>
                                <td>20Â¢</td>
                                <td>15Â¢</td>
                                <td style="color: var(--success);">+5Â¢</td>
                            </tr>
                            <tr>
                                <td>C</td>
                                <td>20Â¢</td>
                                <td>10Â¢</td>
                                <td style="color: var(--success);">+10Â¢</td>
                            </tr>
                            <tr>
                                <td>D</td>
                                <td>20Â¢</td>
                                <td>10Â¢</td>
                                <td style="color: var(--success);">+10Â¢</td>
                            </tr>
                            <tr>
                                <td>E</td>
                                <td>20Â¢</td>
                                <td>5Â¢</td>
                                <td style="color: var(--success);">+15Â¢</td>
                            </tr>
                        </table>
                    </div>
                    <p>Favorite: large underpricing (-40Â¢)<br>Underdogs: small overpricing (+5~15Â¢)</p>
                </div>
            </div>

            <h4>The Real Problem: Stuck NO Tokens on Favorites</h4>

            <div class="box box-danger">
                <span class="box-title">With 100/n% (20% initial)</span>
                <ul>
                    <li>Favorite YES = 20Â¢ (way underpriced) â†’ traders BUY â†’ creator sells cheap</li>
                    <li>Favorite NO = 80Â¢ (way overpriced) â†’ nobody buys â†’ creator STUCK</li>
                </ul>
                <p>When the favorite wins, creator holds worthless 80Â¢ NO tokens.</p>
            </div>

            <h4>Conclusion: Neither Solves the Problem</h4>

            <div class="box box-highlight">
                <span class="box-title">100/n% trades one problem for another</span>
                <ul>
                    <li>âœ… Underdogs priced closer to fair value</li>
                    <li>âŒ Favorites MORE underpriced than 50%</li>
                    <li>âŒ High-priced NO tokens (80Â¢) on favorites won't sell</li>
                </ul>
                <p><strong>Whether it minimizes loss depends on trading patterns.</strong></p>
            </div>

            <h4>True Solutions Remain:</h4>
            <ol>
                <li><strong>CTF Multi-Outcome</strong> - No stuck inventory (can merge)</li>
                <li><strong>Market Maker</strong> - Professional takes inventory risk</li>
                <li><strong>No initial platform liquidity</strong> - Let market discover prices first</li>
                <li><strong>Accept loss as bootstrap cost</strong> - Part of business</li>
            </ol>
        </section>

        <!-- Section 0.3: Liquidity Provision -->
        <section id="liquidity-provision" class="part-1-section">
            <h3><span class="section-num part-1">1.3</span>Liquidity Provision</h3>

            <h4>The Bootstrap Problem</h4>

            <div class="diagram">
                <div class="diagram-title">Liquidity Bootstrap Cycle</div>
                <div style="text-align: center; padding: 1.5rem; font-family: var(--font-mono); line-height: 1.8;">
                    No liquidity â†’ No trading â†’ No fees â†’ No LPs attracted<br>
                    â†“<br>
                    <strong>Platform must break the cycle</strong><br>
                    â†“<br>
                    Platform provides liquidity â†’ Trading starts â†’<br>
                    Fees generated â†’ Volume proven â†’ External LPs join
                </div>
            </div>

            <h4>Who Provides Liquidity?</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Reality</th>
                            <th>When</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Random traders</td>
                            <td>Won't come to empty market</td>
                            <td>Never initially</td>
                        </tr>
                        <tr>
                            <td>Professional MMs</td>
                            <td>Only for proven high-volume markets</td>
                            <td>After volume is established</td>
                        </tr>
                        <tr>
                            <td><strong>Platform itself</strong></td>
                            <td><strong>Must bootstrap new markets</strong></td>
                            <td><strong>From day 1</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Balanced Position Strategy</h4>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">For a 5-outcome market with $1000 liquidity:

Split equally: $200 per market

For each market (at 20% YES / 80% NO):
- 200 YES @ $0.20 = $40
- 200 NO @ $0.80 = $160
- Total: $200 â†’ 200 YES + 200 NO (balanced)

If A wins:
- A: 200 YES Ã— $1 = $200
- B: 200 NO Ã— $1 = $200
- C: 200 NO Ã— $1 = $200
- D: 200 NO Ã— $1 = $200
- E: 200 NO Ã— $1 = $200

Return: $1000 âœ“ (break even when balanced)</pre>

            <h4>Small Liquidity Problem</h4>

            <div class="box box-warning">
                <span class="box-title">$500 liquidity is NOT enough</span>
                <ul>
                    <li>Wide spreads (bad prices)</li>
                    <li>High slippage on small trades</li>
                    <li>Can't execute large orders</li>
                    <li>Poor user experience</li>
                </ul>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Liquidity Level</th>
                            <th>Trading Quality</th>
                            <th>User Experience</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>$500/market</td>
                            <td>Poor</td>
                            <td>Frustrating, large slippage</td>
                        </tr>
                        <tr>
                            <td>$5,000/market</td>
                            <td>Okay</td>
                            <td>Acceptable for small traders</td>
                        </tr>
                        <tr>
                            <td>$50,000+/market</td>
                            <td>Good</td>
                            <td>Professional-grade</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 0.4: Stuck Inventory Problem -->
        <section id="stuck-inventory" class="part-1-section">
            <h3><span class="section-num part-1">1.4</span>Stuck Inventory Problem</h3>

            <h4>The Core Issue</h4>

            <div class="box box-danger">
                <span class="box-title">Critical Problem</span>
                In Grouped Binary markets, LP can get stuck with worthless tokens that nobody wants to buy.
            </div>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">Initial: Market A at 20% YES / 80% NO
Creator holds: 200 YES + 200 NO

Time passes... A becomes favorite (80% YES):

Traders: "I want to BUY YES on A!"
Creator: Sells YES, happy ğŸ˜Š

Traders: "I don't want NO on A, A will win!"
Creator: Can't sell NO, stuck ğŸ˜°

Result:
- YES: 200 â†’ 50 (sold 150, good!)
- NO: 200 â†’ 200 (nobody bought, stuck!)

If A wins:
- 50 YES Ã— $1 = $50
- 200 NO Ã— $0 = $0
Creator started with $200, ends with $50
LOSS: $150 âŒ</pre>

            <h4>Why Cross-Market Selling Doesn't Help</h4>

            <p>Selling NO on losing markets (B, C, D, E) does NOT compensate:</p>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">Sell 200 NO on B @ 95Â¢ = $190 received
But: If A wins, buyer gets 200 Ã— $1 = $200

Creator sold $200 value for $190 = LOSS

Cross-market selling adds MORE losses, not compensation.</pre>

            <h4>CTF Solves This</h4>

            <div class="box box-success">
                <span class="box-title">CTF Multi-Outcome allows merging complete sets</span>
                <pre style="font-size: 0.85rem; background: transparent; margin: 0; padding: 0; color: inherit;">100 A + 100 B + 100 C + 100 D + 100 E â†’ $100 USDC

No counterparty needed!
Always can exit via merge.
No stuck inventory problem.</pre>
            </div>

            <h4>Worst Case Scenario for LP</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Fee Income</th>
                            <th>Inventory Loss</th>
                            <th>Total Loss</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Best case</td>
                            <td>$500</td>
                            <td>$100</td>
                            <td style="color: var(--success);">+$500 profit</td>
                        </tr>
                        <tr>
                            <td>Average</td>
                            <td>$200</td>
                            <td>$350</td>
                            <td>-$150 (15%)</td>
                        </tr>
                        <tr>
                            <td>Bad case</td>
                            <td>$75</td>
                            <td>$400</td>
                            <td>-$325 (32.5%)</td>
                        </tr>
                        <tr>
                            <td style="color: var(--danger);"><strong>Worst case</strong></td>
                            <td>$75</td>
                            <td>$860</td>
                            <td style="color: var(--danger);"><strong>-$785 (78.5%)</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 0.5: Market Makers -->
        <section id="market-makers" class="part-1-section">
            <h3><span class="section-num part-1">1.5</span>Market Makers (MM)</h3>

            <h4>How MMs Make Profit</h4>

            <div class="grid-2">
                <div class="card">
                    <h4>1. Spread (Buy Low, Sell High)</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">MM posts orders:
BUY YES @ 49Â¢
SELL YES @ 51Â¢

When both sides fill:
- Trader A buys YES @ 51Â¢ â†’ MM receives 51Â¢
- Trader B sells YES @ 49Â¢ â†’ MM pays 49Â¢

MM profit: 51Â¢ - 49Â¢ = 2Â¢ per share
If 10,000 shares traded: Profit = $200</pre>
                </div>

                <div class="card">
                    <h4>2. Fee Rebates</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">Taker (takes order): Pays 2% fee
Maker (provides order): Receives 0.5% rebate

MM always provides orders â†’ earns rebate
on every trade</pre>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 1rem;">
                <div class="card">
                    <h4>3. High-Frequency Adjustments</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">Price moving up?
â†’ Cancel BUY orders (avoid buying expensive)
â†’ Raise SELL prices (sell higher)

Amateur LP: Updates hourly â†’ Gets run over
Pro MM: Updates every second â†’ Captures spread</pre>
                </div>

                <div class="card">
                    <h4>4. Hedging Across Markets</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">Correlated markets:
- "Chiefs win Super Bowl" (YES @ 25Â¢)
- "Mahomes wins MVP" (YES @ 30Â¢)

MM sells Chiefs YES, buys Mahomes YES (hedge)
Net exposure: ~zero
But: Keeps spread profit!</pre>
                </div>
            </div>

            <h4>MM Profit Formula</h4>

            <div class="box box-highlight">
                <pre style="font-size: 0.9rem; background: transparent; margin: 0; padding: 0; color: inherit;">MM Profit = Spread Income
          + Fee Rebates
          + Arbitrage Gains
          - Inventory Losses
          - Operating Costs</pre>
            </div>

            <h4>How to Attract MMs to Nostra</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Description</th>
                            <th>Cost to Platform</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pay Monthly Fee</td>
                            <td>$2-10K/month for liquidity</td>
                            <td>Fixed, predictable</td>
                        </tr>
                        <tr>
                            <td>Fee Rebates</td>
                            <td>MM earns 0.5% on trades</td>
                            <td>Reduced revenue</td>
                        </tr>
                        <tr>
                            <td>Revenue Sharing</td>
                            <td>50% of trading fees</td>
                            <td>Variable</td>
                        </tr>
                        <tr>
                            <td>Token Incentives</td>
                            <td>NOSTRA tokens for liquidity</td>
                            <td>Token dilution</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Key Insight: Polymarket Model</h4>

            <div class="box box-highlight">
                <span class="box-title">Polymarket has NO public LP UI</span>
                <p>Liquidity comes from:</p>
                <ul>
                    <li>Professional MMs (via API, not UI)</li>
                    <li>Polymarket internal (hidden, behind scenes)</li>
                    <li>Traders' limit orders</li>
                </ul>
                <p>Regular users just trade. They don't "provide liquidity" through UI.</p>
            </div>
        </section>

        <!-- Section 0.6: Fee Structure -->
        <section id="fee-structure" class="part-1-section">
            <h3><span class="section-num part-1">1.6</span>Fee Structure</h3>



            <h4>Proposed Fee Structure</h4>

            <div
                style="font-size: 0.95rem; padding: 1.5rem; background: #1e293b; color: #e2e8f0; border-radius: 8px; margin: 1rem 0; border: 1px solid #334155;">
                <div style="margin-bottom: 0.5rem;"><strong style="color: #ffffff;">Trading Fee:</strong> <span
                        style="color: #4ade80;">0%</span></div>
                <div style="margin-bottom: 0.5rem;"><strong style="color: #ffffff;">Redemption Fee (on Net
                        Winnings):</strong> <span style="color: #facc15;">4%</span></div>
                <div style="color: #f1f5f9; font-size: 0.92em; margin-bottom: 0.5rem;">
                    <em>Net winnings = total payout minus initial investment (amount spent on buying
                        shares/tickets).</em>
                </div>
                <div style="font-family: monospace; color: #94a3b8; margin-top: 0.5rem;">
                    Distribution:<br>
                    â”œâ”€â”€ Platform Fee: 2%<br>
                    â””â”€â”€ Creator Fee: 2%
                </div>
            </div>



            <h4>The Tradeoff</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Fee Level</th>
                            <th>LP Yield</th>
                            <th>Trading Activity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>High (3%+)</td>
                            <td>High</td>
                            <td>Low (expensive to trade)</td>
                        </tr>
                        <tr>
                            <td>Medium (2%)</td>
                            <td>Medium</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td>Low (0.5%)</td>
                            <td>Low</td>
                            <td>High (cheap to trade)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Can Fees Cover Losses?</h4>

            <div class="box box-warning">
                <span class="box-title">Not always</span>
                <p>If volume is low AND market moves hard in one direction:</p>
                <ul>
                    <li>Fee income: small</li>
                    <li>Inventory loss: large</li>
                    <li>Net: significant loss</li>
                </ul>
                <p>Fees help but don't guarantee profit.</p>
            </div>

            <h4>Industry Benchmarks</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Platform</th>
                            <th>Fee Model</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td><strong>Polymarket</strong> (Global/Crypto)</td>
                            <td>No Trading Fee / Spread</td>
                            <td>
                                <ul>
                                    <li><strong>Trading Fee:</strong> 0% (<a
                                            href="https://docs.polymarket.com/polymarket-learn/trading/fees"
                                            target="_blank" rel="noopener noreferrer">Source</a>).</li>
                                    <li><strong>Net Profit Fee:</strong> 2% (<a
                                            href="https://changelly.com/blog/what-is-polymarket-and-how-does-it-work/#:~:text=oversees%20its%20activities.-,How%20does%20Polymarket%20make%20money?,What%20chain%20is%20Polymarket%20on?"
                                            target="_blank" rel="noopener noreferrer">Source</a>).</li>
                                    <li><strong>Cost:</strong> Bid-ask spread.</li>
                                    <li><em>Note: CTF structure; users can mint/merge.</em></li>
                                    <li><strong>Rewards:</strong>
                                        <ul>
                                            <li><a href="https://docs.polymarket.com/polymarket-learn/trading/liquidity-rewards"
                                                    target="_blank" rel="noopener noreferrer">Liquidity Rewards</a>:
                                                Weekly
                                                payouts for liquidity providers offering tight spreads.</li>
                                            <li><a href="https://docs.polymarket.com/polymarket-learn/trading/holding-rewards"
                                                    target="_blank" rel="noopener noreferrer">Holding Rewards</a>:
                                                Incentives for users maintaining open positions.</li>
                                        </ul>
                                    </li>

                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Polymarket US</strong> (Regulated/Upcoming)</td>
                            <td>Flat Trading Fee</td>
                            <td>
                                <ul>
                                    <li><strong>Trading Fee:</strong> 0.01% ($0.0001 per share).</li>
                                    <li><strong>Comparison:</strong> ~100x lower than Kalshi.</li>
                                    <li><a href="https://www.ingame.com/polymarket-reveals-us-fees/" target="_blank"
                                            rel="noopener noreferrer">Source</a></li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Kalshi</strong> (US Regulated)</td>
                            <td>Maker-Taker</td>
                            <td>
                                <ul>
                                    <li><strong>Taker:</strong> Variable (approx. 1.75% - 7%) based on probability.
                                        <br><em>Formula: 0.07 Ã— Price Ã— (1-Price)</em>
                                    </li>
                                    <li><strong>Maker:</strong> Lower or rebate.</li>
                                    <li><a href="https://kalshi.com/fee-schedule" target="_blank"
                                            rel="noopener noreferrer">Source</a></li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box box-info">
                <span class="box-title">Reference: Bid-Ask Spread</span>
                <p style="margin-bottom: 0.5rem;">The <strong>Bid-ask spread</strong> is an implicit cost representing
                    the
                    gap between the Price you can Buy at (Ask) and the Price you can Sell at (Bid).</p>
                <ul>
                    <li>If you enter a trade and exit immediately, you lose this difference.</li>
                    <li>This "cost" is captured by Market Makers/Liquidity Providers, not the platform.</li>
                    <li>In zero-fee markets like Polymarket, this is the primary cost for users.</li>
                </ul>
            </div>

            <h4>Fee Distribution Model</h4>

            <div class="diagram">
                <div class="diagram-title">Fee Flow</div>
                <div style="text-align: center; padding: 1.5rem; font-family: var(--font-mono); line-height: 1.8;">
                    LP provides liquidity<br>â†“<br>
                    Traders can trade<br>â†“<br>
                    Traders pay fees<br>â†“<br>
                    Fees go to LP as yield<br>â†“<br>
                    LP compensated for risk<br>â†“<br>
                    More LPs attracted â†’ More liquidity
                </div>
            </div>
        </section>

        <!-- Section 0.7: AMM vs Order Book -->
        <section id="amm-vs-orderbook" class="part-1-section">
            <h3><span class="section-num part-1">1.7</span>AMM vs Order Book</h3>

            <h4>Fundamental Difference</h4>

            <div class="grid-2">
                <div class="card">
                    <h4><span class="label label-accent">Order Book</span></h4>
                    <ul>
                        <li>Match buyers with sellers</li>
                        <li>Need counterparty for every trade</li>
                        <li>Prices set by traders</li>
                        <li>Can have no liquidity</li>
                    </ul>
                </div>
                <div class="card">
                    <h4><span class="label label-success">AMM</span></h4>
                    <ul>
                        <li>Trade against liquidity pool</li>
                        <li>No counterparty needed</li>
                        <li>Prices set by formula</li>
                        <li>Always some liquidity</li>
                    </ul>
                </div>
            </div>

            <h4>AMM Example: World Cup</h4>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">LMSR AMM for 8 teams:

Initial pool ($5000 liquidity):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Team        â”‚ Tokens â”‚ Price â”‚ Implied Odds â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Brazil      â”‚ 5000   â”‚ 12.5Â¢ â”‚ 12.5%        â”‚
â”‚ France      â”‚ 5000   â”‚ 12.5Â¢ â”‚ 12.5%        â”‚
â”‚ Argentina   â”‚ 5000   â”‚ 12.5Â¢ â”‚ 12.5%        â”‚
â”‚ ...         â”‚ 5000   â”‚ 12.5Â¢ â”‚ 12.5%        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Trader buys $100 Brazil:
â†’ Gets ~700 Brazil tokens
â†’ Pool Brazil: 5000 â†’ 4300
â†’ Brazil price: 12.5% â†’ 25% (automatic!)</pre>

            <h4>Comparison Table</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Order Book</th>
                            <th>AMM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Always tradeable</td>
                            <td>No (need counterparty)</td>
                            <td><span class="label label-success">Yes</span></td>
                        </tr>
                        <tr>
                            <td>Capital needed</td>
                            <td>High ($50K+)</td>
                            <td><span class="label label-success">Lower ($5K)</span></td>
                        </tr>
                        <tr>
                            <td>Price discovery</td>
                            <td>Order matching</td>
                            <td>Formula</td>
                        </tr>
                        <tr>
                            <td>Large trades</td>
                            <td>Better (if deep)</td>
                            <td>Higher slippage</td>
                        </tr>
                        <tr>
                            <td>Complexity</td>
                            <td>Medium</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td>Pro traders prefer</td>
                            <td><span class="label label-success">Yes</span></td>
                            <td>No</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Key Insight</h4>

            <div class="box box-warning">
                <span class="box-title">Order Book and AMM don't mix</span>
                <p>They are fundamentally different systems. You choose ONE, not both.</p>
                <p>Nostra currently has Order Book. Switching to AMM would require significant rebuild.</p>
            </div>
        </section>

        <!-- Section 0.8: Platform Economics -->
        <section id="platform-economics" class="part-1-section">
            <h3><span class="section-num part-1">1.8</span>Platform Economics</h3>

            <h4>The Unavoidable Bootstrap Cost</h4>

            <div class="box box-danger">
                <span class="box-title">Before external LPs/MMs are attracted, the platform MUST:</span>
                <ul>
                    <li>Provide initial liquidity</li>
                    <li>Take inventory risk</li>
                    <li>Accept potential losses as cost of business</li>
                </ul>
                <p>This is unavoidable. Every marketplace subsidizes early growth.</p>
            </div>

            <h4>Budget Example</h4>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">Nostra Year 1 Plan:

Launch 50 markets
Initial liquidity: $500 per market = $25,000
Expected loss rate: 20%
Expected loss: $5,000

Think of it as:
"$5,000 marketing spend to build a prediction market"

Compare to:
- Google Ads: $10,000
- Influencer marketing: $20,000
- Traditional marketing: $50,000+

$5,000 liquidity loss = CHEAP customer acquisition</pre>

            <h4>Growth Path</h4>

            <div class="diagram">
                <div class="diagram-title">Platform Growth Phases</div>
                <div
                    style="text-align: left; padding: 1.5rem; font-family: var(--font-mono); line-height: 1.8; font-size: 0.85rem;">
                    <strong>Phase 1: Platform Provides All Liquidity</strong><br>
                    â”œâ”€â”€ Provide $500/market<br>
                    â”œâ”€â”€ Lose ~20% = $100/market<br>
                    â””â”€â”€ Build volume and reputation<br>
                    â†“<br>
                    <strong>Phase 2: Attract External LPs</strong><br>
                    â”œâ”€â”€ Show track record<br>
                    â”œâ”€â”€ "We did $1M volume last month"<br>
                    â””â”€â”€ LPs see fee opportunity<br>
                    â†“<br>
                    <strong>Phase 3: Sustainable Model</strong><br>
                    â”œâ”€â”€ External LPs provide liquidity<br>
                    â”œâ”€â”€ Platform just takes fees<br>
                    â””â”€â”€ Profit!
                </div>
            </div>

            <h4>Polymarket's Business Model</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Polymarket</th>
                            <th>Risk Bearer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Platform</td>
                            <td>Takes 2% fee on winnings</td>
                            <td><span class="label label-success">Zero inventory risk</span></td>
                        </tr>
                        <tr>
                            <td>Market Makers</td>
                            <td>Provide liquidity via API</td>
                            <td><span class="label label-danger">Bear inventory risk</span></td>
                        </tr>
                        <tr>
                            <td>Users</td>
                            <td>Trade only</td>
                            <td>Market risk</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 0.9: Implementation Considerations -->
        <section id="implementation" class="part-1-section">
            <h3><span class="section-num part-1">1.9</span>Implementation Considerations</h3>

            <h4>Code Changes for 100/n% Pricing</h4>

            <div class="grid-2">
                <div class="card">
                    <h4>Database Schema (No Change Needed)</h4>
                    <pre
                        style="font-size: 0.8rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">// Prisma schema
// Price is set at market creation
model Outcome {
  currentPrice Decimal @default(0.5)
  probability  Decimal @default(50)
}</pre>
                </div>

                <div class="card">
                    <h4>Market Creation Logic</h4>
                    <pre
                        style="font-size: 0.8rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">// When creating market with N outcomes
const totalOutcomes = outcomes.length;
const initialPrice = 1 / totalOutcomes;
const initialProbability = 100 / totalOutcomes;

for (const outcome of outcomes) {
  await outcomeRepository.create({
    ...outcome,
    currentPrice: initialPrice,      // 0.20 for 5 outcomes
    probability: initialProbability, // 20% for 5 outcomes
  });
}</pre>
                </div>
            </div>

            <h4>Price Update Options</h4>

            <div class="grid-2">
                <div class="card">
                    <h4>Option A: Independent (Simple)</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">Buy A â†’ A price up
Others unchanged
Sum drifts from 100%
Arbitrage corrects</pre>
                </div>

                <div class="card">
                    <h4>Option B: Linked (Complex)</h4>
                    <pre
                        style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">Buy A â†’ A price up
Others auto-decrease
Sum stays at 100%
Requires more logic</pre>
                </div>
            </div>

            <h4>MM Bot Architecture (Optional)</h4>

            <pre
                style="font-size: 0.8rem; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px; margin: 1rem 0;">// Auto-rebalancing market maker bot
const MM_CONFIG = {
  maxImbalance: 50,       // Max YES/NO difference
  spreadBps: 400,         // 4% spread
  rebalanceThreshold: 25  // Rebalance at 25 token imbalance
};

async function onTrade(market, side, amount) {
  const position = getPosition(market);
  const imbalance = Math.abs(position.yes - position.no);

  if (imbalance > MM_CONFIG.rebalanceThreshold) {
    await rebalance(market, position);
  }

  // Adjust spreads based on inventory
  await adjustSpreads(market, position);
}

async function checkToxicInventory(market) {
  const yesPrice = market.yesPrice;

  // If YES is winning big, NO is toxic
  if (yesPrice > 0.70) {
    const noTokens = getPosition(market, 'NO');
    if (noTokens > 0) {
      // Sell at ANY price before it goes to zero
      await placeSellOrder(market, 'NO', noTokens, yesPrice * 0.5);
    }
  }
}</pre>

            <h4>UI Considerations</h4>

            <div class="box box-highlight">
                <span class="box-title">Following Polymarket's approach</span>
                <ul>
                    <li>âŒ No public "Provide Liquidity" UI</li>
                    <li>âœ… Simple trading interface only</li>
                    <li>âœ… Admin panel for platform liquidity (internal)</li>
                    <li>âœ… API access for MM partners (later)</li>
                </ul>
            </div>

            <h4>Risk Disclosure (Required)</h4>

            <pre
                style="font-size: 0.85rem; padding: 1rem; background: #450a0a; color: #fecaca; border-radius: 6px; margin: 1rem 0;">For any LP feature (if built):

âš ï¸ RISK WARNING

Providing liquidity involves significant risk.

â€¢ You may lose 30-80% of deposited funds
â€¢ Fee income may NOT cover losses
â€¢ Worst case: lose almost everything

Only deposit what you can afford to lose.</pre>
        </section>

        <!-- Summary for Part 0 -->
        <section style="background: #0f172a; border-radius: 12px;">
            <h3 style="color: #e2e8f0; border-bottom-color: rgba(255,255,255,0.2);">Part 1 Summary: Key Design Decisions
            </h3>

            <div class="table-wrapper">
                <table style="color: #e2e8f0;">
                    <thead>
                        <tr>
                            <th style="background: #1e293b; color: #f8fafc; font-weight: 600;">Decision</th>
                            <th style="background: #1e293b; color: #f8fafc; font-weight: 600;">Recommendation</th>
                            <th style="background: #1e293b; color: #f8fafc; font-weight: 600;">Rationale</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Initial Probability</td>
                            <td style="color: #fef08a;"><strong>100/n% or 50%</strong></td>
                            <td style="color: #94a3b8;">Neither prevents loss; trade-offs exist</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Market Structure</td>
                            <td style="color: #fef08a;"><strong>Grouped Binary â†’ NegRisk</strong></td>
                            <td style="color: #94a3b8;">Already implemented; upgrade path available</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Trading System</td>
                            <td style="color: #fef08a;"><strong>Keep Order Book</strong></td>
                            <td style="color: #94a3b8;">Already built; AMM requires rebuild</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Initial Liquidity</td>
                            <td style="color: #fef08a;"><strong>Platform provides</strong></td>
                            <td style="color: #94a3b8;">No external LPs at start</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Liquidity Amount</td>
                            <td style="color: #fef08a;"><strong>$1-5K per market</strong></td>
                            <td style="color: #94a3b8;">Balance between UX and risk</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Expected Loss</td>
                            <td style="color: #fef08a;"><strong>~20% of liquidity</strong></td>
                            <td style="color: #94a3b8;">Marketing/customer acquisition cost</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Fee Structure</td>
                            <td style="color: #fef08a;"><strong>2% fee</strong></td>
                            <td style="color: #94a3b8;">Industry standard</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #334155;">
                            <td style="color: #cbd5e1;">Public LP UI</td>
                            <td style="color: #fef08a;"><strong>No</strong> (like Polymarket)</td>
                            <td style="color: #94a3b8;">Keep it simple; internal only</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div
                style="margin-top: 2rem; padding: 1rem; background: #1e293b; border-radius: 8px; border-left: 4px solid #fef08a;">
                <p style="margin: 0; font-size: 1.1rem; color: #f1f5f9;">
                    <strong style="color: #fef08a;">Bottom Line:</strong> Accept initial liquidity losses as cost of
                    bootstrapping.
                    Focus on building volume. External LPs and MMs will come after platform proves itself.
                </p>
            </div>
        </section>

        <!-- PART 1: MARKET MODELS -->
        <div class="part-divider">
            <h2>Part 2: Advanced Market Models</h2>
            <span class="part-subtitle">Nostra Grouped Binary vs Polymarket NegRisk</span>
        </div>

        <!-- Section 1.1: Model Comparison -->
        <section id="model-comparison" class="part-2-section">
            <h3><span class="section-num part-2">2.1</span>Market Model Comparison Overview</h3>
            <p>Understanding the two primary market model architectures for prediction markets with multiple outcomes:
                Nostra's current Grouped Binary approach vs Polymarket's NegRisk Adapter solution.
            </p>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Grouped Binary (Nostra)</th>
                            <th>Grouped Binary + NegRisk (Polymarket)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Initial Probability</strong></td>
                            <td>Flexible (50% or 100/N%)</td>
                            <td>Flexible (Market Decided)</td>
                        </tr>
                        <tr>
                            <td><strong>Sum of YES Prices</strong></td>
                            <td><span class="label label-danger">Flexible (Unlinked)</span></td>
                            <td><span class="label label-success">~100% (Arbitrage Enforced)</span></td>
                        </tr>
                        <tr>
                            <td><strong>Market Linkage</strong></td>
                            <td>Independent (No Connection)</td>
                            <td>Adapter Layer (NegRisk)</td>
                        </tr>
                        <tr>
                            <td><strong>Stuck Inventory</strong></td>
                            <td><span class="label label-danger">Yes (Major Issue)</span></td>
                            <td><span class="label label-success">No (Convertible)</span></td>
                        </tr>
                        <tr>
                            <td><strong>conditionId</strong></td>
                            <td>Multiple (Per Outcome)</td>
                            <td>Multiple + negRiskMarketId</td>
                        </tr>
                        <tr>
                            <td><strong>Position Conversion</strong></td>
                            <td><span class="label label-danger">Not Possible</span></td>
                            <td><span class="label label-success">Via Adapter</span></td>
                        </tr>
                        <tr>
                            <td><strong>Liquidity Fragmentation</strong></td>
                            <td><span class="label label-danger">Severe (N Markets)</span></td>
                            <td><span class="label label-success">Unified</span></td>
                        </tr>
                        <tr>
                            <td><strong>Implementation Complexity</strong></td>
                            <td><span class="label label-success">Simple</span></td>
                            <td><span class="label label-warning">6-10 Weeks</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box box-highlight">
                <span class="box-title">Key Takeaway</span>
                <ul>
                    <li><strong>Nostra Current:</strong> Grouped Binary - Simple implementation but serious liquidity
                        fragmentation and stuck inventory issues</li>
                    <li><strong>Polymarket:</strong> Grouped Binary + NegRisk - Same base structure, but solves
                        inventory and liquidity via adapter layer</li>
                    <li><strong>Core Difference:</strong> NegRisk adapter enables NO token equivalence, converting
                        independent markets into a unified liquidity system</li>
                </ul>
            </div>
        </section>

        <!-- Section 1.2: Grouped Binary Model (Nostra) -->
        <section id="grouped-binary" class="part-2-section">
            <h3><span class="section-num part-2">2.2</span>Grouped Binary Model (Nostra)</h3>
            <p>The Grouped Binary model is Nostra's current implementation. Each outcome in a multi-outcome question is
                treated as an independent binary market with its own YES/NO tokens.</p>

            <h4>How It Works</h4>
            <div class="diagram">
                <div class="diagram-title">Grouped Binary Architecture</div>
                <p style="text-align: center; margin-bottom: 1rem; font-size: 0.875rem; color: var(--text-muted);">Each
                    outcome = Independent binary market with separate <code>conditionId</code></p>
                <div class="diagram-content">
                    <div class="token"><span class="token-slot">Market 1</span><br><strong>Spain</strong><br>YES / NO
                    </div>
                    <div class="token"><span class="token-slot">Market 2</span><br><strong>France</strong><br>YES / NO
                    </div>
                    <div class="token"><span class="token-slot">Market 3</span><br><strong>Brazil</strong><br>YES / NO
                    </div>
                    <div class="token"><span class="token-slot">Market 4</span><br><strong>Argentina</strong><br>YES /
                        NO</div>
                    <div class="token"><span class="token-slot">Market 5</span><br><strong>England</strong><br>YES / NO
                    </div>
                </div>
            </div>

            <h4>Key Characteristics</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>Advantages</h4>
                    <ul>
                        <li><strong>Simple Implementation:</strong> Each market is independent, easy to create and
                            manage</li>
                        <li><strong>Familiar UX:</strong> Standard YES/NO betting interface</li>
                        <li><strong>Flexible Pricing:</strong> No mechanical constraints on initial prices</li>
                        <li><strong>Easy Resolution:</strong> One winner resolves YES, others resolve NO</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Disadvantages</h4>
                    <ul>
                        <li><strong>No Market Linkage:</strong> Prices don't sum to 100%</li>
                        <li><strong>Stuck Inventory:</strong> Can't convert Spain YES â†’ France YES</li>
                        <li><strong>Arbitrage Leakage:</strong> No mechanical arbitrage enforcement</li>
                        <li><strong>Capital Inefficiency:</strong> Must sell + rebuy to switch positions</li>
                    </ul>
                </div>
            </div>

            <h4>The Stuck Inventory Problem</h4>
            <div class="box box-danger">
                <span class="box-title">Example Scenario</span>
                <p>You hold 100 Spain YES tokens at $0.25 each. Spain gets eliminated. Now you want France YES instead:
                </p>
                <ol>
                    <li><strong>Sell Spain YES:</strong> Price crashed to $0.05 â†’ You get only $5 (lost $20)</li>
                    <li><strong>Buy France YES:</strong> Price rose to $0.40 â†’ You get only 12.5 tokens</li>
                </ol>
                <p style="margin-top: 1rem;"><strong>Result:</strong> Double slippage, significant value loss. Your
                    position is effectively "stuck."</p>
            </div>

            <div class="box box-highlight">
                <span class="box-title">When Grouped Binary Works Well</span>
                <ul>
                    <li>Low volume markets where conversion demand is minimal</li>
                    <li>Markets with few outcomes (2-3)</li>
                    <li>Short duration markets where position changes are rare</li>
                    <li>MVP/early stage products prioritizing simplicity</li>
                </ul>
            </div>
        </section>

        <!-- Section 2.3: Grouped Market Liquidity Problem -->
        <section id="liquidity-problem" class="part-2-section">
            <h3><span class="section-num part-2">2.3</span>Liquidity Problems in Grouped Binary</h3>
            <p>Nostra's Grouped Binary model is simple, but serious liquidity issues arise in multi-outcome markets.
                Let's examine specific scenarios where problems occur.</p>

            <h4>ğŸ“Œ Scenario Setup: 2026 World Cup Winner Prediction</h4>
            <div class="box box-highlight">
                <span class="box-title">Nostra Market Structure</span>
                <p>Creating a "2026 World Cup Winner" market with 5 teams on Nostra:</p>
                <div class="diagram" style="margin-top: 1rem;">
                    <div class="diagram-content">
                        <div class="token"><strong>Spain</strong><br>YES/NO<br><span
                                class="token-slot">conditionId_1</span></div>
                        <div class="token"><strong>Brazil</strong><br>YES/NO<br><span
                                class="token-slot">conditionId_2</span></div>
                        <div class="token"><strong>France</strong><br>YES/NO<br><span
                                class="token-slot">conditionId_3</span></div>
                        <div class="token"><strong>Argentina</strong><br>YES/NO<br><span
                                class="token-slot">conditionId_4</span></div>
                        <div class="token"><strong>England</strong><br>YES/NO<br><span
                                class="token-slot">conditionId_5</span></div>
                    </div>
                </div>
                <p style="margin-top: 1rem; font-size: 0.875rem;">
                    <strong>Key Point:</strong> Each team is an <strong>independent market</strong> with no connection
                    to others.
                </p>
            </div>

            <h4>ğŸ”´ Problem 1: Stuck Inventory (Cannot Convert Position)</h4>
            <div class="box box-danger">
                <span class="box-title">Alice's Situation</span>
                <p>Alice invested expecting Spain to win:</p>
                <pre style="font-size: 0.8rem; margin: 0.75rem 0;">
<span class="code-comment">// Alice's Initial Investment</span>
Purchased: Spain YES 1,000 tokens @ 20Â¢
Investment: <span class="code-value">$200</span>
Expected Return: $1,000 if Spain wins (5x)

<span class="code-comment">// One week later: Spain eliminated in group stage!</span>
Spain YES price: 20Â¢ â†’ <span class="code-keyword">3Â¢</span> (85% drop)
Alice's position value: $200 â†’ <span class="code-keyword">$30</span></pre>
            </div>

            <p>Alice now thinks France will win and wants to switch her position:</p>

            <div class="grid-2">
                <div class="card" style="border-left: 3px solid #dc2626;">
                    <h4>âŒ Nostra (Current)</h4>
                    <pre
                        style="font-size: 0.75rem; margin: 0.5rem 0; background: #fef2f2; padding: 0.75rem; border-radius: 4px; color: #7f1d1d;">
<span style="color: #b91c1c;">// Step 1: Sell Spain YES</span>
Sell: 1,000 tokens @ 3Â¢
Amount received: <span style="color: #dc2626; font-weight: 600;">$30</span>
Slippage: -10% â†’ Actual $27

<span style="color: #b91c1c;">// Step 2: Buy France YES</span>
France YES price: 25Â¢
Can purchase: $27 / 0.25 = <span style="color: #dc2626; font-weight: 600;">108 tokens</span>
Slippage: +8% â†’ Actual 100 tokens

<span style="color: #991b1b; font-weight: 600;">Result: 1,000 â†’ 100 tokens (90% loss)</span></pre>
                </div>
                <div class="card" style="border-left: 3px solid #16a34a;">
                    <h4>âœ… NegRisk (Polymarket)</h4>
                    <pre
                        style="font-size: 0.75rem; margin: 0.5rem 0; background: #f0fdf4; padding: 0.75rem; border-radius: 4px; color: #14532d;">
<span style="color: #15803d;">// Direct Conversion via Adapter</span>
Spain YES â†’ France YES
Mathematical conversion (no slippage)

Value-based conversion:
$30 value â†’ $30 value
France @ 25Â¢ = <span style="color: #16a34a; font-weight: 600;">120 tokens</span>

<span style="color: #166534; font-weight: 600;">Result: Value preserved, 20% more tokens</span></pre>
                </div>
            </div>

            <h4>ğŸ”´ Problem 2: Liquidity Fragmentation</h4>
            <div class="box box-danger">
                <span class="box-title">Bob's Large Order</span>
                <p>Bob wants to invest $10,000 in Brazil YES:</p>
                <pre style="font-size: 0.8rem; margin: 0.75rem 0;">
<span class="code-comment">// Nostra Order Book State (Brazil YES)</span>
Total market liquidity: $50,000 (all 5 teams)
Brazil market liquidity: <span class="code-value">$10,000</span> (1/5)

Order book depth:
  15Â¢: 5,000 shares ($750)
  16Â¢: 8,000 shares ($1,280)
  17Â¢: 10,000 shares ($1,700)
  18Â¢: 15,000 shares ($2,700)
  19Â¢: 20,000 shares ($3,800)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total depth: ~<span class="code-value">$10,230</span>

<span class="code-comment">// Bob executes $10,000 market order</span>
$750  @ 15Â¢ = 5,000 shares
$1,280 @ 16Â¢ = 8,000 shares
$1,700 @ 17Â¢ = 10,000 shares
$2,700 @ 18Â¢ = 15,000 shares
$3,570 @ 19Â¢ = 18,789 shares
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total: <span class="code-value">56,789 shares</span> @ avg <span class="code-keyword">17.6Â¢</span>

Expected at 15Â¢: 66,667 shares
<span class="code-keyword">Slippage loss: ~15% (9,878 shares)</span></pre>
            </div>

            <h4>ğŸ”´ Problem 3: Price Inconsistency</h4>
            <p>Because markets are independent, the sum of all YES prices may not equal 100%:</p>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>YES Price</th>
                            <th>Implied Probability</th>
                            <th>Issue</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Spain</td>
                            <td>25Â¢</td>
                            <td>~22%</td>
                            <td rowspan="5"
                                style="vertical-align: middle; background: #fef2f2; color: #dc2626; font-weight: 600;">
                                Sum: 112Â¢<br><br>12% Overbook<br>(Arbitrage Opportunity)</td>
                        </tr>
                        <tr>
                            <td>Brazil</td>
                            <td>23Â¢</td>
                            <td>~20%</td>
                        </tr>
                        <tr>
                            <td>France</td>
                            <td>22Â¢</td>
                            <td>~19%</td>
                        </tr>
                        <tr>
                            <td>Argentina</td>
                            <td>21Â¢</td>
                            <td>~18%</td>
                        </tr>
                        <tr>
                            <td>England</td>
                            <td>21Â¢</td>
                            <td>~18%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box box-highlight">
                <span class="box-title">Why Does This Happen?</span>
                <p><strong>Nostra:</strong> Each market is independent â†’ No price adjustment mechanism â†’ Relies on
                    manual arbitrage</p>
                <p><strong>Polymarket:</strong> NegRisk adapter â†’ NO token equivalence â†’ Automatic arbitrage maintains
                    ~100%</p>
            </div>

            <h4>ğŸ”´ Problem 4: LP Inventory Risk</h4>
            <div class="box box-danger">
                <span class="box-title">Market Maker Charlie's Situation</span>
                <pre style="font-size: 0.8rem; margin: 0.75rem 0;">
<span class="code-comment">// Charlie provides liquidity to Spain market</span>
Provided: YES side $5,000, NO side $5,000 (total $10,000)

<span class="code-comment">// Trading occurs: Users buy Spain YES heavily</span>
Result: Charlie sells Spain YES and receives USDC
Position: Holding $8,000 Spain NO (skewed inventory)

<span class="code-comment">// After Spain is eliminated</span>
Spain NO = $1 (wins!)
Charlie profit: +$8,000

<span class="code-comment">// But what if Spain had won?</span>
Spain NO = $0 (loses)
Charlie loss: <span class="code-keyword">-$8,000</span>

<span class="code-keyword">Problem: Cannot convert inventory to another team!</span>
Even if Charlie wants to hedge with France NO:
1. Sell Spain NO (slippage)
2. Buy France NO (slippage)
= Double slippage makes hedging too expensive</pre>
            </div>

            <h4>ğŸ“Š Problem Summary: Nostra vs Polymarket</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Nostra (Grouped Binary)</th>
                            <th>Polymarket (NegRisk)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Position Conversion</strong><br><span
                                    style="font-size: 0.75rem; color: var(--text-muted);">Spain â†’ France</span></td>
                            <td><span class="label label-danger">Impossible</span><br>Sell â†’ Buy (double slippage)</td>
                            <td><span class="label label-success">Possible</span><br>Mathematical conversion (0%
                                slippage)</td>
                        </tr>
                        <tr>
                            <td><strong>Large Orders</strong><br><span
                                    style="font-size: 0.75rem; color: var(--text-muted);">$10K market order</span></td>
                            <td><span class="label label-danger">10-20% slippage</span><br>Fragmented liquidity</td>
                            <td><span class="label label-success">1-3% slippage</span><br>Unified liquidity</td>
                        </tr>
                        <tr>
                            <td><strong>Price Consistency</strong><br><span
                                    style="font-size: 0.75rem; color: var(--text-muted);">Î£ YES = ?</span></td>
                            <td><span class="label label-danger">90-120%</span><br>Relies on manual arbitrage</td>
                            <td><span class="label label-success">~100%</span><br>Automatic arbitrage</td>
                        </tr>
                        <tr>
                            <td><strong>LP Hedging</strong><br><span
                                    style="font-size: 0.75rem; color: var(--text-muted);">Inventory rebalancing</span>
                            </td>
                            <td><span class="label label-danger">High cost</span><br>Requires double trade</td>
                            <td><span class="label label-success">Low cost</span><br>Direct conversion possible</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box box-highlight">
                <span class="box-title">ğŸ’¡ Key Insights</span>
                <ul>
                    <li><strong>2-3 outcomes:</strong> Nostra's Grouped Binary works adequately</li>
                    <li><strong>5+ outcomes:</strong> Liquidity fragmentation becomes severe, degrading UX</li>
                    <li><strong>Solution:</strong> NegRisk adapter in Section 2.4 solves all these problems</li>
                </ul>
            </div>
        </section>

        <!-- Section 2.4: NegRisk Adapter -->
        <section id="negrisk" class="part-2-section">
            <h3><span class="section-num part-2">2.4</span>NegRisk Adapter (Polymarket Approach)</h3>
            <p>The key insight: <strong>Collateral is split directly into mutually exclusive YES tokens</strong>. This
                concentrates liquidity.</p>

            <div class="box box-highlight">
                <span class="box-title">Core Formula</span>
                <p style="text-align: center; font-size: 1.1rem; margin: 0.5rem 0;">
                    <strong>Sum(Price(YES)) = $1.00</strong>
                </p>
                <p style="text-align: center; font-size: 1.1rem; margin: 0.5rem 0; color: var(--text-muted);">
                    <strong>Sum(Price(NO)) = $(N - 1).00</strong>
                </p>
                <p style="margin-top: 1rem;">
                    Instead of creating independent binary markets where <code>YES + NO = $1</code> for <em>each</em>
                    outcome, NegRisk links them all together.
                    A single dollar of collateral is split across all outcomes.
                </p>
                <ul style="margin-top: 0.5rem;">
                    <li><strong>Grouped Binary:</strong> $1 collateral â†’ 1 YES(Spain) + 1 NO(Spain)</li>
                    <li><strong>NegRisk:</strong> $1 collateral â†’ 1 YES(Spain) + 1 YES(Brazil) + ... + 1 YES(England)
                    </li>
                </ul>
            </div>

            <h4>Worked Example: $10,000 Liquidity, 5 Countries</h4>
            <p>Let's see how NegRisk solves the liquidity crisis that Grouped Binary cannot handle.</p>

            <div class="diagram">
                <div class="diagram-title">Initial Setup</div>
                <pre
                    style="font-size: 0.85rem; margin: 0; padding: 1rem; background: #1e293b; color: #e2e8f0; border-radius: 6px;">
5 Countries: Spain, Brazil, France, Argentina, England

Initial price: 20Â¢ YES / 80Â¢ NO each (20% probability)
Market maker: $2,000 per country â†’ 2,000 (YES+NO) pairs each
Total liquidity: $10,000</pre>
            </div>

            <h5 style="margin-top: 1.5rem;">After 5 Trades (mostly Spain YES buys)</h5>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Country</th>
                            <th>YES Left</th>
                            <th>NO Left</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Spain</strong></td>
                            <td style="color: var(--danger);">500</td>
                            <td>2,000</td>
                            <td><span class="label label-danger">1,500 NO excess</span></td>
                        </tr>
                        <tr>
                            <td>Brazil</td>
                            <td>1,600</td>
                            <td>2,000</td>
                            <td><span class="label label-warning">400 NO excess</span></td>
                        </tr>
                        <tr>
                            <td>France</td>
                            <td>1,800</td>
                            <td>2,000</td>
                            <td><span class="label label-warning">200 NO excess</span></td>
                        </tr>
                        <tr>
                            <td>Argentina</td>
                            <td>2,000</td>
                            <td>2,000</td>
                            <td><span class="label label-success">Balanced</span></td>
                        </tr>
                        <tr>
                            <td>England</td>
                            <td>2,000</td>
                            <td>2,000</td>
                            <td><span class="label label-success">Balanced</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="grid-2" style="margin-top: 1.5rem;">
                <div class="card" style="border-left: 3px solid #dc2626;">
                    <h4>âŒ Grouped Binary (Nostra)</h4>
                    <pre
                        style="font-size: 0.8rem; margin: 0.5rem 0; background: #fef2f2; padding: 0.75rem; border-radius: 4px; color: #7f1d1d;">
Trade 6: Buy $100 more Spain YES...

Only 500 Spain YES left!
Price jumps: 20Â¢ â†’ 30Â¢ â†’ 40Â¢

$100 buys only 250 tokens (not 500)

<span style="color: #991b1b; font-weight: 600;">1,500 Spain NO tokens sit useless ğŸ’€
Cannot move to other countries!</span></pre>
                </div>
                <div class="card" style="border-left: 3px solid #16a34a;">
                    <h4>âœ… NegRisk (Polymarket)</h4>
                    <pre
                        style="font-size: 0.8rem; margin: 0.5rem 0; background: #f0fdf4; padding: 0.75rem; border-radius: 4px; color: #14532d;">
<span style="color: #15803d;">// Market Maker rebalances:</span>
Collect 200 NO from each of 5 countries
= 200 complete "NO sets" (5 tokens each)
= 200 Ã— $4 = <span style="color: #16a34a; font-weight: 600;">$800 USDC</span>

Mint 400 new Spain YES+NO pairs
<span style="color: #166534; font-weight: 600;">â†’ Spain liquidity restored! âœ“</span></pre>
                </div>
            </div>

            <h5 style="margin-top: 1.5rem;">Result Comparison</h5>
            <div class="grid-2">
                <div class="card" style="border-left: 3px solid var(--danger);">
                    <h4>Grouped Binary</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Spain YES: <strong style="color: var(--danger);">500</strong> (depleted)</li>
                        <li>Slippage: <strong style="color: var(--danger);">HIGH (+100%)</strong></li>
                        <li>Excess NO: <strong>STUCK forever</strong></li>
                    </ul>
                </div>
                <div class="card" style="border-left: 3px solid var(--success);">
                    <h4>NegRisk</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Spain YES: <strong style="color: var(--success);">1,300</strong> (restored)</li>
                        <li>Slippage: <strong style="color: var(--success);">LOW (normal)</strong></li>
                        <li>Excess NO: <strong>CONVERTED to USDC</strong></li>
                    </ul>
                </div>
            </div>

            <div class="box box-success" style="margin-top: 1.5rem;">
                <span class="box-title">Why This Works</span>
                <p><strong>The Magic:</strong> In NegRisk, all NO tokens can be combined and converted back to USDC
                    (because one of them MUST win). This "unlocks" the stuck inventory and allows market makers to
                    continuously rebalance liquidity where it's needed most.</p>
                <p style="margin-top: 0.75rem;"><strong>Result:</strong> Even with many outcomes, liquidity stays
                    healthy
                    because excess inventory can always flow to where demand is highest.</p>
            </div>
        </section>

        <!-- Section 2.5: NegRisk Architecture -->
        <section id="negrisk-arch" class="part-2-section">
            <h3><span class="section-num part-2">2.5</span>NegRisk Architecture</h3>

            <div class="box box-highlight">
                <span class="box-title">Open Source Reference</span>
                <p>Polymarket's NegRisk implementation is open source and audited by ChainSecurity and OpenZeppelin.</p>
                <p style="margin-top: 0.75rem; font-size: 0.8125rem;">
                    <a href="https://github.com/Polymarket/neg-risk-ctf-adapter" target="_blank"
                        style="color: var(--accent);">GitHub: Polymarket/neg-risk-ctf-adapter â†’</a>
                </p>
                <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.5rem;">
                    Contains: NegRiskAdapter, NegRiskOperator, NegRiskCtfExchange, WrappedCollateral, Vault, FeeModule
                </p>
            </div>

            <h4>Architecture Layers</h4>
            <div class="arch-layer">
                <div class="arch-layer-title">User Interface</div>
                <div class="arch-layer-content">
                    <div class="func">"Convert my Spain YES to France YES"</div>
                </div>
            </div>

            <div class="arch-arrow">â†“</div>

            <div class="arch-layer">
                <div class="arch-layer-title">NegRisk Adapter</div>
                <div class="arch-layer-content">
                    <div class="func">splitPosition()</div>
                    <div class="func">mergePositions()</div>
                    <div class="func">convertPosition()</div>
                </div>
                <p style="text-align: center; margin-top: 0.75rem; font-size: 0.9rem; color: var(--text-muted);">
                    Core: USDC â†” NO tokens â†” YES tokens conversion</p>
            </div>

            <div class="arch-arrow">â†“</div>

            <div class="arch-layer">
                <div class="arch-layer-title">Grouped Binary Markets</div>
                <p style="text-align: center; font-size: 0.9rem; color: var(--text-muted);">
                    Spain YES/NO | France YES/NO | Brazil YES/NO | ...<br>
                    All linked by <code>negRiskMarketId</code>
                </p>
            </div>

            <div class="arch-arrow">â†“</div>

            <div class="arch-layer">
                <div class="arch-layer-title">Conditional Tokens Framework (CTF)</div>
                <p style="text-align: center; font-size: 0.9rem; color: var(--text-muted);">Base layer for all token
                    operations</p>
            </div>

            <h4>Key Contracts</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Contract</th>
                            <th>Purpose</th>
                            <th>Nostra Has?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>NegRiskAdapter</strong></td>
                            <td>Core conversion logic (NO â†’ YES)</td>
                            <td><span class="label label-danger">No</span></td>
                        </tr>
                        <tr>
                            <td><strong>NegRiskOperator</strong></td>
                            <td>Admin functions, oracle integration</td>
                            <td><span class="label label-danger">No</span></td>
                        </tr>
                        <tr>
                            <td><strong>WrappedCollateral</strong></td>
                            <td>Wrapped USDC for atomic operations</td>
                            <td><span class="label label-danger">No</span></td>
                        </tr>
                        <tr>
                            <td>ConditionalTokens (CTF)</td>
                            <td>Base token framework</td>
                            <td><span class="label label-success">Yes</span></td>
                        </tr>
                        <tr>
                            <td>MarketFactory</td>
                            <td>Create binary markets</td>
                            <td><span class="label label-success">Yes</span></td>
                        </tr>
                        <tr>
                            <td>CTFExchange</td>
                            <td>Order book trading</td>
                            <td><span class="label label-success">Yes</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 2.6: Implementation Options -->
        <section id="implementation-options" class="part-2-section">
            <h3><span class="section-num part-2">2.6</span>Implementation Options</h3>

            <h4>What Nostra Needs to Implement NegRisk</h4>
            <ul class="impl-list">
                <li>
                    <span class="impl-number">1</span>
                    <div class="impl-content">
                        <strong>WrappedCollateral.sol</strong>
                        <small>ERC20 wrapper around USDC for internal accounting</small>
                    </div>
                    <span class="difficulty difficulty-easy">Easy</span>
                </li>
                <li>
                    <span class="impl-number">2</span>
                    <div class="impl-content">
                        <strong>NegRiskAdapter.sol</strong>
                        <small>Core conversion logic: splitPosition, mergePositions, convertPosition</small>
                    </div>
                    <span class="difficulty difficulty-hard">Hard</span>
                </li>
                <li>
                    <span class="impl-number">3</span>
                    <div class="impl-content">
                        <strong>NegRiskOperator.sol</strong>
                        <small>Market group management, links binary markets together</small>
                    </div>
                    <span class="difficulty difficulty-medium">Medium</span>
                </li>
                <li>
                    <span class="impl-number">4</span>
                    <div class="impl-content">
                        <strong>Database: negRiskMarketId field</strong>
                        <small>Link markets in the same group</small>
                    </div>
                    <span class="difficulty difficulty-easy">Easy</span>
                </li>
                <li>
                    <span class="impl-number">5</span>
                    <div class="impl-content">
                        <strong>API: /api/negrisk/convert endpoint</strong>
                        <small>Handle conversion requests from frontend</small>
                    </div>
                    <span class="difficulty difficulty-medium">Medium</span>
                </li>
                <li>
                    <span class="impl-number">6</span>
                    <div class="impl-content">
                        <strong>Frontend: Convert Position UI</strong>
                        <small>Button to convert between outcomes in the same group</small>
                    </div>
                    <span class="difficulty difficulty-medium">Medium</span>
                </li>
            </ul>

            <h4>Estimated Effort</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Time</th>
                            <th>Complexity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Smart Contracts (1-3)</td>
                            <td>2-3 weeks</td>
                            <td>High (security critical)</td>
                        </tr>
                        <tr>
                            <td>Backend API (4-5)</td>
                            <td>3-5 days</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td>Frontend UI (6)</td>
                            <td>3-5 days</td>
                            <td>Medium</td>
                        </tr>
                        <tr>
                            <td>Testing & Audit</td>
                            <td>2-4 weeks</td>
                            <td>Critical</td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td><strong>6-10 weeks</strong></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="box box-warning">
                <span class="box-title">Alternative: Arbitrage Bots</span>
                <p>Before implementing NegRisk, consider if you really need it. Current arbitrage bots can provide
                    economic position balancing with much simpler implementation.</p>
                <p><strong>When to implement NegRisk?</strong></p>
                <ul>
                    <li>High volume when conversion demand justifies complexity</li>
                    <li>User complaints about stuck inventory</li>
                    <li>Competitive pressure for Polymarket-level features</li>
                </ul>
            </div>
        </section>

        <!-- PART 2: CHAINLINK INTEGRATION -->
        <div class="part-divider">
            <h2>Part 3: Chainlink Oracle Integration</h2>
            <span class="part-subtitle">Decentralized Market Resolution</span>
        </div>

        <!-- Section 2.1: Why Chainlink -->
        <section id="why-chainlink" class="part-3-section">
            <h3><span class="section-num part-3">3.1</span>Why Chainlink for Market Resolution</h3>

            <h4>Current State: Manual Resolution</h4>
            <div class="box box-danger">
                <span class="box-title">Problems with Manual Resolution</span>
                <ul>
                    <li><strong>Centralized trust:</strong> Admin can manipulate outcomes</li>
                    <li><strong>No verifiable source:</strong> Users must trust the platform</li>
                    <li><strong>Human error risk:</strong> Manual process prone to mistakes</li>
                </ul>
            </div>

            <h4>Chainlink Solution</h4>
            <div class="box box-success">
                <span class="box-title">Benefits of Chainlink Resolution</span>
                <ul>
                    <li><strong>Decentralized oracle network:</strong> Multiple nodes verify data</li>
                    <li><strong>Verifiable data sources:</strong> Cryptographic proofs of authenticity</li>
                    <li><strong>Trustless automation:</strong> No human intervention needed</li>
                    <li><strong>Industry standard:</strong> Proven security track record</li>
                </ul>
            </div>

            <div style="margin: 2rem 0; text-align: center;">
                <img src="images/chainlink-architecture.png" alt="Chainlink Architecture"
                    style="max-width: 100%; border-radius: 12px; border: 1px solid var(--border); box-shadow: var(--shadow-md);">
                <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.5rem;">Chainlink Decentralized
                    Oracle Network (DON) Architecture</p>
            </div>
        </section>

        <!-- Section 3.2: Getting Started with Chainlink -->
        <section id="chainlink-setup" class="part-3-section">
            <h3><span class="section-num part-3">3.2</span>Getting Started with Chainlink</h3>
            <p>Before integrating Chainlink oracles into Nostra, there are essential preparation steps to ensure smooth
                operation and cost management.</p>

            <h4>Step 1: Acquire LINK Tokens</h4>
            <div class="box box-highlight">
                <span class="box-title">Why LINK Tokens?</span>
                <p>LINK is the native token of the Chainlink network. It's required to pay oracle nodes for their
                    services (data retrieval, computation, consensus).</p>
                <ul>
                    <li><strong>Payment mechanism:</strong> Oracle requests consume LINK as payment</li>
                    <li><strong>Incentive alignment:</strong> Nodes stake LINK, losing it if they provide bad data</li>
                    <li><strong>Network security:</strong> Economic incentives ensure honest behavior</li>
                </ul>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h4><span class="label label-accent">Mainnet LINK</span></h4>
                    <ul>
                        <li>Purchase from exchanges (Binance, Coinbase, etc.)</li>
                        <li>Bridge to target chain (Polygon, BSC)</li>
                        <li>Store in platform wallet</li>
                        <li>Typical cost: ~$15-20 per LINK</li>
                    </ul>
                </div>
                <div class="card">
                    <h4><span class="label label-success">Testnet LINK</span></h4>
                    <ul>
                        <li>Free from Chainlink faucets</li>
                        <li><a href="https://faucets.chain.link/" target="_blank">faucets.chain.link</a></li>
                        <li>Use for development & testing</li>
                        <li>Available on Sepolia, Mumbai, etc.</li>
                    </ul>
                </div>
            </div>

            <h4>Step 2: Set Up Subscription (for Chainlink Functions)</h4>
            <div class="diagram">
                <div class="diagram-title">Chainlink Functions Subscription Model</div>
                <div class="flow-steps">
                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <span class="step-text">Create Subscription</span>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <span class="step-text">Fund with LINK</span>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step">
                        <span class="step-number">3</span>
                        <span class="step-text">Add Consumer Contract</span>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step">
                        <span class="step-number">4</span>
                        <span class="step-text">Make Requests</span>
                    </div>
                </div>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Step</th>
                            <th>Action</th>
                            <th>Tool/Method</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. Create Subscription</td>
                            <td>Register a new subscription ID</td>
                            <td><a href="https://functions.chain.link/" target="_blank">functions.chain.link</a> UI</td>
                        </tr>
                        <tr>
                            <td>2. Fund Subscription</td>
                            <td>Deposit LINK tokens (min 2 LINK recommended)</td>
                            <td>UI or <code>addFunds()</code> contract call</td>
                        </tr>
                        <tr>
                            <td>3. Add Consumer</td>
                            <td>Whitelist your resolver contract address</td>
                            <td><code>addConsumer(subscriptionId, consumerAddress)</code></td>
                        </tr>
                        <tr>
                            <td>4. Configure Limits</td>
                            <td>Set gas limits and callback gas</td>
                            <td>Contract constructor or setter functions</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Step 3: Deploy Consumer Contract</h4>
            <pre>
<span class="code-comment">// SPDX-License-Identifier: MIT</span>
<span class="code-keyword">pragma solidity</span> ^0.8.19;

<span class="code-keyword">import</span> {FunctionsClient} <span class="code-keyword">from</span> <span class="code-string">"@chainlink/contracts/src/v0.8/functions/v1_0_0/FunctionsClient.sol"</span>;
<span class="code-keyword">import</span> {FunctionsRequest} <span class="code-keyword">from</span> <span class="code-string">"@chainlink/contracts/src/v0.8/functions/v1_0_0/libraries/FunctionsRequest.sol"</span>;

<span class="code-keyword">contract</span> <span class="code-class">NostraMarketResolver</span> <span class="code-keyword">is</span> FunctionsClient {
    <span class="code-keyword">using</span> FunctionsRequest <span class="code-keyword">for</span> FunctionsRequest.Request;

    <span class="code-comment">// Subscription ID from Chainlink Functions UI</span>
    <span class="code-keyword">uint64</span> <span class="code-keyword">private</span> subscriptionId;

    <span class="code-comment">// Gas limit for callback</span>
    <span class="code-keyword">uint32</span> <span class="code-keyword">private constant</span> GAS_LIMIT = <span class="code-value">300000</span>;

    <span class="code-comment">// DON ID for the network (e.g., "fun-polygon-mainnet-1")</span>
    <span class="code-keyword">bytes32</span> <span class="code-keyword">private</span> donId;

    <span class="code-keyword">constructor</span>(
        <span class="code-keyword">address</span> router,
        <span class="code-keyword">uint64</span> _subscriptionId,
        <span class="code-keyword">bytes32</span> _donId
    ) FunctionsClient(router) {
        subscriptionId = _subscriptionId;
        donId = _donId;
    }

    <span class="code-comment">// Request market resolution</span>
    <span class="code-keyword">function</span> <span class="code-function">requestResolution</span>(
        <span class="code-keyword">bytes32</span> marketId,
        <span class="code-keyword">string calldata</span> source,
        <span class="code-keyword">string[] calldata</span> args
    ) <span class="code-keyword">external</span> <span class="code-keyword">returns</span> (<span class="code-keyword">bytes32</span> requestId) {
        FunctionsRequest.Request <span class="code-keyword">memory</span> req;
        req.initializeRequestForInlineJavaScript(source);

        <span class="code-keyword">if</span> (args.length > <span class="code-value">0</span>) {
            req.setArgs(args);
        }

        requestId = _sendRequest(
            req.encodeCBOR(),
            subscriptionId,
            GAS_LIMIT,
            donId
        );
    }
}
</pre>

            <h4>Step 4: Estimate and Budget LINK Costs</h4>
            <div class="box box-warning">
                <span class="box-title">Cost Planning</span>
                <p>LINK costs vary by network and request complexity. Plan your budget accordingly:</p>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Service</th>
                            <th>Cost per Request</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Price Feeds</td>
                            <td>Free (sponsored)</td>
                            <td>Common pairs already funded by protocols</td>
                        </tr>
                        <tr>
                            <td>Chainlink Functions</td>
                            <td>~0.2-0.5 LINK</td>
                            <td>Depends on computation & callback gas</td>
                        </tr>
                        <tr>
                            <td>Chainlink Automation</td>
                            <td>~0.1-0.3 LINK</td>
                            <td>Per upkeep execution</td>
                        </tr>
                        <tr>
                            <td>VRF (Randomness)</td>
                            <td>~0.25 LINK</td>
                            <td>If random selection needed</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Step 5: Security Best Practices</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>ğŸ” Access Control</h4>
                    <ul>
                        <li>Use <code>onlyOwner</code> for admin functions</li>
                        <li>Whitelist authorized callers</li>
                        <li>Implement timelock for critical changes</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>ğŸ’° Fund Management</h4>
                    <ul>
                        <li>Monitor subscription balance</li>
                        <li>Set up low-balance alerts</li>
                        <li>Use multisig for fund deposits</li>
                    </ul>
                </div>
            </div>

            <div class="box box-success">
                <span class="box-title">Quick Start Checklist</span>
                <ul style="list-style: none; padding-left: 0;">
                    <li>â˜ Acquire testnet LINK from faucet</li>
                    <li>â˜ Create subscription at functions.chain.link</li>
                    <li>â˜ Fund subscription with minimum 2 LINK</li>
                    <li>â˜ Deploy consumer contract</li>
                    <li>â˜ Add consumer to subscription</li>
                    <li>â˜ Test with simple request</li>
                    <li>â˜ Monitor for successful callback</li>
                    <li>â˜ Repeat on mainnet with real LINK</li>
                </ul>
            </div>
        </section>

        <!-- Section 3.3: Handling Long-tail Markets -->
        <section id="long-tail-markets" class="part-3-section">
            <h3><span class="section-num part-3">3.3</span>Handling Long-tail & Unstructured Markets</h3>
            <p>What if we want to resolve a niche market like <em>"Who won the local 'Our Ballad' singing
                    contest?"</em>?</p>

            <h4>Scenario A: Data Exists Online</h4>
            <div class="box box-highlight">
                <span class="box-title">Solution: Chainlink Functions</span>
                <p>If the result is published on an official website, news article, or Wikipedia:</p>
                <ol>
                    <li><strong>Developer</strong> writes a JavaScript script to scrape the winner's name (e.g., from
                        <code>div.winner</code>).
                    </li>
                    <li><strong>Chainlink Nodes (DON)</strong> execute this script and fetch the data.</li>
                    <li><strong>Consensus</strong> is reached, and the result ("Kim Cheol-soo") is delivered on-chain.
                    </li>
                </ol>
                <p style="color: #166534; font-weight: 500; margin-top: 0.5rem;">âœ“ Best for: Verifiable digital data
                    sources.</p>
            </div>

            <h4>Scenario B: No Digital Footprint</h4>
            <div class="box box-danger">
                <span class="box-title">The Limitation</span>
                <p>If the contest is so small that no news covers it and there's no website, <strong>Chainlink cannot
                        resolve it</strong>. Chainlink is a delivery service for real-world data, not a creator of
                    truth.</p>
            </div>

            <h4>Alternative: UMA (Optimistic Oracle)</h4>
            <p>For unstructured, long-tail markets where no API exists, <strong>UMA</strong> offers a human-powered
                solution (used by Polymarket).</p>

            <div class="grid-2">
                <div class="card">
                    <h4>How UMA Works</h4>
                    <ol style="font-size: 0.875rem;">
                        <li><strong>Proposal:</strong> Anyone asserts "Kim Cheol-soo won".</li>
                        <li><strong>Challenge Period:</strong> A window (e.g., 2 hours) opens for disputes.</li>
                        <li><strong>Finalization:</strong> If no dispute, the answer is accepted.</li>
                        <li><strong>Dispute:</strong> If challenged, token holders vote to decide the truth.</li>
                    </ol>
                </div>
                <div class="card">
                    <h4>Pros & Cons</h4>
                    <ul style="font-size: 0.875rem;">
                        <li><span style="color: #166534;">âœ“</span> Works for ANY question humans can verify.</li>
                        <li><span style="color: #166534;">âœ“</span> No API required.</li>
                        <li><span style="color: #991b1b;">âœ—</span> Slower (requires challenge period).</li>
                        <li><span style="color: #991b1b;">âœ—</span> More complex game theory.</li>
                    </ul>
                </div>
            </div>

            <div class="box box-warning">
                <span class="box-title">Summary: Choosing the Right Oracle</span>
                <ul>
                    <li><strong>Website/API exists</strong> â†’ <span class="label label-primary">Chainlink
                            Functions</span> (Cleanest, Fastest)</li>
                    <li><strong>No digital info</strong> â†’ <span class="label label-warning">UMA (Optimistic)</span> or
                        <span class="label label-danger">Manual Admin</span> (Cheapest)
                    </li>
                </ul>
            </div>
        </section>

        <!-- Section 2.3: Chainlink Products -->
        <section id="chainlink-products" class="part-3-section">
            <h3><span class="section-num part-3">3.4</span>Chainlink Products Overview</h3>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Use Case</th>
                            <th>Best For</th>
                            <th>Cost</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Data Feeds</strong></td>
                            <td>Price data (BTC, ETH, stocks)</td>
                            <td>"Will BTC exceed $100K?"</td>
                            <td><span class="label label-success">FREE</span></td>
                        </tr>
                        <tr>
                            <td><strong>Functions</strong></td>
                            <td>Custom API calls</td>
                            <td>Sports scores, election results</td>
                            <td>~0.25 LINK/request</td>
                        </tr>
                        <tr>
                            <td><strong>Automation</strong></td>
                            <td>Scheduled/conditional execution</td>
                            <td>Auto-resolve at deadline</td>
                            <td>~0.1 LINK/execution</td>
                        </tr>
                        <tr>
                            <td><strong>VRF</strong></td>
                            <td>Verifiable randomness</td>
                            <td>Lottery-style markets</td>
                            <td>~0.25 LINK/request</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Detailed Product Summaries -->
            <h4>Detailed Product Summaries</h4>

            <!-- Data Feeds -->
            <div class="box" style="border-left: 4px solid #22c55e; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem;">ğŸ“ˆ</span>
                    <span class="box-title" style="margin: 0;">Data Feeds (Price Feeds)</span>
                    <span class="label label-success">FREE</span>
                </div>
                <p><strong>What it does:</strong> Provides real-time, tamper-proof price data aggregated from multiple
                    premium data providers.</p>
                <div class="grid-2" style="margin: 1rem 0;">
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                        <ol style="font-size: 0.875rem; margin: 0;">
                            <li>Multiple Chainlink nodes fetch prices from exchanges</li>
                            <li>Prices are aggregated (median) for manipulation resistance</li>
                            <li>Result stored on-chain, updated regularly</li>
                            <li>Your contract reads the latest price directly</li>
                        </ol>
                    </div>
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>Best for:</strong></p>
                        <ul style="font-size: 0.875rem; margin: 0;">
                            <li>"Will BTC exceed $100K by Dec 2025?"</li>
                            <li>"Will ETH/USD be above $5,000?"</li>
                            <li>Crypto, forex, commodities markets</li>
                        </ul>
                    </div>
                </div>
                <pre style="font-size: 0.8rem; margin: 0;">
<span class="code-comment">// Simple usage - read price directly</span>
(, int256 price, , , ) = priceFeed.latestRoundData();
<span class="code-keyword">bool</span> yesWins = price > threshold;</pre>
            </div>

            <!-- Functions -->
            <div class="box" style="border-left: 4px solid #3b82f6; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem;">âš¡</span>
                    <span class="box-title" style="margin: 0;">Chainlink Functions</span>
                    <span class="label label-accent">~0.2-0.5 LINK</span>
                </div>
                <p><strong>What it does:</strong> Execute custom JavaScript code on Chainlink's Decentralized Oracle
                    Network (DON) to fetch data from any API.</p>
                <div class="grid-2" style="margin: 1rem 0;">
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                        <ol style="font-size: 0.875rem; margin: 0;">
                            <li>Write JavaScript to fetch/process data</li>
                            <li>Contract sends request to DON</li>
                            <li>Multiple nodes execute your script</li>
                            <li>Consensus result returned on-chain</li>
                        </ol>
                    </div>
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>Best for:</strong></p>
                        <ul style="font-size: 0.875rem; margin: 0;">
                            <li>Sports scores (ESPN, official league APIs)</li>
                            <li>Election results (government sources)</li>
                            <li>Weather data, custom events</li>
                            <li>Any data with a public API</li>
                        </ul>
                    </div>
                </div>
                <pre style="font-size: 0.8rem; margin: 0;">
<span class="code-comment">// JavaScript executed by DON</span>
<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> Functions.makeHttpRequest({
  url: <span class="code-string">`https://api.sports.io/match/${args[0]}`</span>
});
<span class="code-keyword">return</span> Functions.encodeString(response.data.winner);</pre>
            </div>

            <!-- Automation -->
            <div class="box" style="border-left: 4px solid #8b5cf6; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem;">â°</span>
                    <span class="box-title" style="margin: 0;">Chainlink Automation</span>
                    <span class="label" style="background: #8b5cf6; color: white;">~0.1-0.3 LINK</span>
                </div>
                <p><strong>What it does:</strong> Automatically trigger smart contract functions based on time schedules
                    or custom conditions.</p>
                <div class="grid-2" style="margin: 1rem 0;">
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                        <ol style="font-size: 0.875rem; margin: 0;">
                            <li>Register your contract as an "Upkeep"</li>
                            <li>Define trigger: time-based or condition-based</li>
                            <li>Chainlink nodes monitor your conditions</li>
                            <li>When triggered, <code>performUpkeep()</code> is called</li>
                        </ol>
                    </div>
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>Best for:</strong></p>
                        <ul style="font-size: 0.875rem; margin: 0;">
                            <li>Auto-resolve markets at deadline</li>
                            <li>Trigger resolution when conditions met</li>
                            <li>Scheduled price checks</li>
                            <li>Any "cron job" style automation</li>
                        </ul>
                    </div>
                </div>
                <pre style="font-size: 0.8rem; margin: 0;">
<span class="code-comment">// Automation-compatible contract</span>
<span class="code-keyword">function</span> checkUpkeep(<span class="code-keyword">bytes calldata</span>) <span class="code-keyword">external view returns</span> (<span class="code-keyword">bool</span> upkeepNeeded, <span class="code-keyword">bytes memory</span>) {
    upkeepNeeded = block.timestamp >= market.deadline && !market.resolved;
}
<span class="code-keyword">function</span> performUpkeep(<span class="code-keyword">bytes calldata</span>) <span class="code-keyword">external</span> { resolveMarket(); }</pre>
            </div>

            <!-- VRF -->
            <div class="box" style="border-left: 4px solid #ec4899; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem;">ğŸ²</span>
                    <span class="box-title" style="margin: 0;">Chainlink VRF (Verifiable Random Function)</span>
                    <span class="label" style="background: #ec4899; color: white;">~0.25 LINK</span>
                </div>
                <p><strong>What it does:</strong> Generates cryptographically secure, verifiable random numbers that
                    cannot be manipulated by miners, nodes, or users.</p>
                <div class="grid-2" style="margin: 1rem 0;">
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                        <ol style="font-size: 0.875rem; margin: 0;">
                            <li>Contract requests random number</li>
                            <li>Chainlink node generates random + cryptographic proof</li>
                            <li>Proof verified on-chain (tamper-proof)</li>
                            <li>Random number delivered to your contract</li>
                        </ol>
                    </div>
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>Best for:</strong></p>
                        <ul style="font-size: 0.875rem; margin: 0;">
                            <li>Lottery-style prediction markets</li>
                            <li>Random winner selection</li>
                            <li>Fair tie-breakers</li>
                            <li>Any provably fair randomness needs</li>
                        </ul>
                    </div>
                </div>
                <pre style="font-size: 0.8rem; margin: 0;">
<span class="code-comment">// Request random number</span>
<span class="code-keyword">uint256</span> requestId = COORDINATOR.requestRandomWords(keyHash, subId, confirmations, gasLimit, numWords);

<span class="code-comment">// Callback with verified random</span>
<span class="code-keyword">function</span> fulfillRandomWords(<span class="code-keyword">uint256</span>, <span class="code-keyword">uint256[] memory</span> randomWords) <span class="code-keyword">internal override</span> {
    winner = participants[randomWords[0] % participants.length];
}</pre>
            </div>

            <!-- Optimistic Oracle Pattern -->
            <div class="box" style="border-left: 4px solid #f59e0b; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem;">âš–ï¸</span>
                    <span class="box-title" style="margin: 0;">Optimistic Oracle Pattern (Hybrid)</span>
                    <span class="label" style="background: #f59e0b; color: white;">Cost-Efficient</span>
                </div>
                <p><strong>What it does:</strong> A cost-saving pattern where results are proposed by an admin/proposer
                    and only verified by Chainlink if disputed.</p>
                <div class="grid-2" style="margin: 1rem 0;">
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                        <ol style="font-size: 0.875rem; margin: 0;">
                            <li>Admin proposes market result</li>
                            <li>Challenge period begins (e.g., 24-48 hours)</li>
                            <li>If no dispute â†’ Result finalized (FREE)</li>
                            <li>If disputed â†’ Chainlink Functions verifies</li>
                        </ol>
                    </div>
                    <div>
                        <p style="font-size: 0.875rem; margin-bottom: 0.5rem;"><strong>Best for:</strong></p>
                        <ul style="font-size: 0.875rem; margin: 0;">
                            <li>High-volume markets (cost savings)</li>
                            <li>Trusted admin environments</li>
                            <li>Markets with clear, verifiable outcomes</li>
                            <li>When Chainlink is backup, not primary</li>
                        </ul>
                    </div>
                </div>
                <div class="diagram" style="margin-top: 1rem;">
                    <div class="diagram-title">Optimistic Resolution Flow</div>
                    <div class="flow-steps">
                        <div class="flow-step">
                            <span class="step-number">1</span>
                            <span class="step-text">Admin Proposes</span>
                        </div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-step">
                            <span class="step-number">2</span>
                            <span class="step-text">Challenge Period</span>
                        </div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-step">
                            <span class="step-number">3</span>
                            <span class="step-text">Dispute? â†’ Chainlink</span>
                        </div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-step">
                            <span class="step-number">4</span>
                            <span class="step-text">Finalize</span>
                        </div>
                    </div>
                </div>
                <div class="box box-warning" style="margin-top: 1rem;">
                    <span class="box-title">Trade-off</span>
                    <p style="margin: 0; font-size: 0.875rem;"><strong>Pro:</strong> ~90% cost reduction if disputes are
                        rare. <strong>Con:</strong> Delayed finality due to challenge period.</p>
                </div>
            </div>

            <!-- Summary Comparison -->
            <h4>When to Use Each Product</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Recommended Product</th>
                            <th>Why</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Price-based markets (crypto, forex)</td>
                            <td><strong>Data Feeds + Automation</strong></td>
                            <td>Free price data, auto-trigger at deadline</td>
                        </tr>
                        <tr>
                            <td>Sports, elections, custom events</td>
                            <td><strong>Functions + Automation</strong></td>
                            <td>Flexible API access, scheduled checks</td>
                        </tr>
                        <tr>
                            <td>High-volume with trusted admin</td>
                            <td><strong>Optimistic + Functions</strong></td>
                            <td>Cost savings, Chainlink as dispute resolver</td>
                        </tr>
                        <tr>
                            <td>Lottery/random selection markets</td>
                            <td><strong>VRF</strong></td>
                            <td>Provably fair, manipulation-proof</td>
                        </tr>
                        <tr>
                            <td>Long-tail/niche markets</td>
                            <td><strong>Functions (custom JS)</strong></td>
                            <td>Scrape any public data source</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 2.4: Resolution Architecture -->
        <section id="resolution-arch" class="part-3-section">
            <h3><span class="section-num part-3">3.5</span>Resolution Architecture</h3>

            <h4>Current vs Proposed Flow</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>Current: Admin Resolution</h4>
                    <div class="flow-step">Admin UI</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">POST /api/admin/resolve</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">Server Wallet signs tx</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step final">reportPayouts() â†’ Resolved</div>
                    <p style="font-size: 0.8125rem; margin-top: 1rem; color: #991b1b;"><strong>Admin manually decides
                            winner</strong></p>
                </div>
                <div class="card">
                    <h4>Proposed: Chainlink Resolution</h4>
                    <div class="flow-step">Market Deadline</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">Chainlink Automation triggers</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step">Contract reads Price Feed</div>
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-step final">reportPayouts() â†’ Resolved</div>
                    <p style="font-size: 0.8125rem; margin-top: 1rem; color: #166534;"><strong>Data-driven automatic
                            resolution</strong></p>
                </div>
            </div>
        </section>

        <!-- Section 2.5: Smart Contract Integration -->
        <section id="smart-contracts" class="part-3-section">
            <h3><span class="section-num part-3">3.6</span>Smart Contract Integration</h3>

            <h4>Functions Client Example (Request)</h4>
            <pre>
<span class="code-comment">// FunctionsClient.sol (Inherited by our market contract)</span>
<span class="code-keyword">import</span> { FunctionsClient } <span class="code-keyword">from</span> <span class="code-value">"@chainlink/.../FunctionsClient.sol"</span>;
<span class="code-keyword">import</span> { FunctionsRequest } <span class="code-keyword">from</span> <span class="code-value">"@chainlink/.../FunctionsRequest.sol"</span>;

<span class="code-keyword">contract</span> NostraMarket <span class="code-keyword">is</span> FunctionsClient {
    <span class="code-keyword">using</span> FunctionsRequest <span class="code-keyword">for</span> FunctionsRequest.Request;

    <span class="code-keyword">address</span> router = 0x...; <span class="code-comment">// Chainlink Router (Oracle Contract)</span>
    <span class="code-keyword">bytes32</span> donId = 0x...;  <span class="code-comment">// DON ID</span>
    <span class="code-keyword">uint64</span> subscriptionId = 1234; <span class="code-comment">// My Subscription ID</span>

    <span class="code-comment">// This function calls the Chainlink Router contract</span>
    <span class="code-keyword">function</span> resolveMarket() <span class="code-keyword">external</span> {
        
        <span class="code-comment">// 1. Create Request (Include JS Logic)</span>
        FunctionsRequest.Request <span class="code-keyword">memory</span> req;
        req.initializeRequestForInlineJavaScript(<span class="code-value">"const apiResponse = await Functions.makeHttpRequest(...)"</span>);

        <span class="code-comment">// 2. Send to Chainlink Router (Step 1 in Diagram)</span>
        <span class="code-keyword">bytes32</span> requestId = _sendRequest(
            req.encodeCBOR(),
            subscriptionId,
            gasLimit,
            donId
        );
        
        <span class="code-comment">// 3. Store ID for verification</span>
        pendingRequests[requestId] = <span class="code-keyword">true</span>;
    }
}
            </pre>

            <h4>Price Feed Resolver Example</h4>
            <pre>
<span class="code-comment">// SPDX-License-Identifier: MIT</span>
<span class="code-keyword">pragma solidity</span> ^0.8.19;

<span class="code-keyword">import</span> "@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol";

<span class="code-keyword">contract</span> PriceFeedResolver {
    AggregatorV3Interface internal priceFeed;
    IConditionalTokens public ctf;

    <span class="code-keyword">struct</span> PriceMarket {
        bytes32 questionId;
        uint256 threshold;      <span class="code-comment">// Price threshold in 8 decimals</span>
        bool resolveAbove;      <span class="code-comment">// true = YES wins if price > threshold</span>
        uint256 deadline;
        bool resolved;
    }

    mapping(bytes32 => PriceMarket) public markets;

    <span class="code-keyword">function</span> resolveMarket(bytes32 questionId) <span class="code-keyword">external</span> {
        PriceMarket storage market = markets[questionId];
        <span class="code-keyword">require</span>(!market.resolved, <span class="code-value">"Already resolved"</span>);
        <span class="code-keyword">require</span>(block.timestamp >= market.deadline, <span class="code-value">"Too early"</span>);

        <span class="code-comment">// Get latest price from Chainlink</span>
        (, int256 price, , , ) = priceFeed.latestRoundData();

        <span class="code-comment">// Determine winner</span>
        bool yesWins = market.resolveAbove
            ? price > int256(market.threshold)
            : price < int256(market.threshold);

        <span class="code-comment">// Report payouts to CTF</span>
        uint256[] memory payouts = new uint256[](2);
        payouts[0] = yesWins ? 1 : 0;  <span class="code-comment">// YES outcome</span>
        payouts[1] = yesWins ? 0 : 1;  <span class="code-comment">// NO outcome</span>

        ctf.reportPayouts(questionId, payouts);
        market.resolved = <span class="code-keyword">true</span>;
    }
}
            </pre>

            <h4>Chainlink Functions Example (JavaScript)</h4>
            <pre>
<span class="code-comment">// This code runs in Chainlink Functions DON</span>
<span class="code-keyword">const</span> apiEndpoint = args[0];  <span class="code-comment">// e.g., "https://api.sportsdata.io/..."</span>
<span class="code-keyword">const</span> jsonPath = args[1];     <span class="code-comment">// e.g., "Games[0].Winner"</span>

<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> Functions.makeHttpRequest({
  url: apiEndpoint,
  headers: { <span class="code-value">"Ocp-Apim-Subscription-Key"</span>: secrets.apiKey }
});

<span class="code-keyword">if</span> (response.error) {
  <span class="code-keyword">throw</span> Error(<span class="code-value">"API request failed"</span>);
}

<span class="code-comment">// Navigate JSON path and return result</span>
<span class="code-keyword">const</span> homeTeamWins = result === <span class="code-value">"HomeTeam"</span> ? 1 : 0;
<span class="code-keyword">return</span> Functions.encodeUint256(homeTeamWins);
            </pre>

            <h4>Network Addresses</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>BSC Testnet</h4>
                    <pre style="font-size: 0.75rem;">LINK: 0x84b9B910527Ad5C03A9Ca831909E21e236EA7b06
BTC/USD: 0x5741306c21795FdCBb9b265Ea0255F499DFe515C
ETH/USD: 0x143db3CEEfbdfe5631aDD3E50f7614B6ba708BA7
BNB/USD: 0x2514895c72f50D8bd4B4F9b1110F0D6bD2c97526</pre>
                </div>
                <div class="card">
                    <h4>Polygon Amoy</h4>
                    <pre style="font-size: 0.75rem;">Functions Router: 0xC22a79eBA640940ABB6dF0f7982cc119578E11De
BTC/USD: 0xe7656e23fE8077D438aEfbec2fAbDf2D8e070C4f
ETH/USD: 0xF0d50568e3A7e8259E16663972b11910F89BD8e7</pre>
                </div>
            </div>
        </section>

        <!-- Section 2.6: Cost & Security -->
        <section id="cost-security" class="part-3-section">
            <h3><span class="section-num part-3">3.7</span>Cost & Security Considerations</h3>

            <h4>Monthly Cost Estimation (100 markets)</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Cost per Use</th>
                            <th>Monthly (100 markets)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Data Feeds (read)</td>
                            <td><span class="label label-success">FREE</span></td>
                            <td>$0</td>
                        </tr>
                        <tr>
                            <td>Functions Request</td>
                            <td>~0.25 LINK</td>
                            <td>25 LINK (~$250)</td>
                        </tr>
                        <tr>
                            <td>Automation Check</td>
                            <td>~0.01 LINK</td>
                            <td>30 LINK (~$300)</td>
                        </tr>
                        <tr>
                            <td>Automation Execute</td>
                            <td>~0.1 LINK</td>
                            <td>10 LINK (~$100)</td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td></td>
                            <td><strong>~65 LINK (~$650)</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Security Considerations</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>Trust Assumptions</h4>
                    <ul style="font-size: 0.875rem;">
                        <li><strong>Data Feeds:</strong> High trust (decentralized nodes)</li>
                        <li><strong>Functions:</strong> Medium (relies on API)</li>
                        <li><strong>API Sources:</strong> Varies by provider</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Required Checks</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Validate Chainlink response data</li>
                        <li>Handle Functions errors gracefully</li>
                        <li>Implement fallback to manual</li>
                        <li>Set appropriate gas limits</li>
                        <li>Monitor subscription balances</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 2.7: Implementation Roadmap -->
        <section id="roadmap" class="part-3-section">
            <h3><span class="section-num part-3">3.8</span>Implementation Roadmap</h3>

            <div class="grid-2">
                <div class="card">
                    <h4>Phase 1: Price Feed Markets (Week 1-2)</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Deploy PriceFeedResolver contract</li>
                        <li>Test with BTC/USD, ETH/USD feeds</li>
                        <li>Create "Will BTC exceed $X?" market</li>
                        <li>Update frontend resolution page</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Phase 2: Automation (Week 3)</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Add AutomationCompatible to resolver</li>
                        <li>Register Upkeep on Chainlink</li>
                        <li>Test auto-resolution at deadline</li>
                        <li>Monitor and tune gas settings</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Phase 3: Functions (Week 4-5)</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Set up Functions subscription</li>
                        <li>Deploy FunctionsResolver contract</li>
                        <li>Write JavaScript for sports API</li>
                        <li>Handle edge cases (API down)</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Phase 4: Production (Week 6)</h4>
                    <ul style="font-size: 0.875rem;">
                        <li>Security audit</li>
                        <li>Mainnet deployment</li>
                        <li>Monitoring dashboards</li>
                        <li>Admin fallback procedures</li>
                    </ul>
                </div>
            </div>

            <div class="box box-highlight" style="margin-top: 2rem;">
                <span class="box-title">Summary</span>
                <div class="table-wrapper" style="margin-top: 1rem;">
                    <table>
                        <thead>
                            <tr>
                                <th>Market Type</th>
                                <th>Chainlink Product</th>
                                <th>Cost</th>
                                <th>Complexity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Price-based ("Will BTC > $X?")</td>
                                <td>Data Feeds</td>
                                <td><span class="label label-success">FREE</span></td>
                                <td>Low</td>
                            </tr>
                            <tr>
                                <td>Time-based auto-resolve</td>
                                <td>Automation</td>
                                <td>~$1/month</td>
                                <td>Medium</td>
                            </tr>
                            <tr>
                                <td>Event-based (sports, elections)</td>
                                <td>Functions</td>
                                <td>~$2.50/request</td>
                                <td>High</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p style="margin-top: 1rem;"><strong>Recommendation:</strong> Start with Price Feed markets (free,
                    simple), add Automation for auto-resolve, then expand to Functions as needed.</p>
            </div>
        </section>

        <!-- PART 4: MULTI-CHAIN STRATEGY -->
        <div class="part-divider">
            <h2>Part 4: Multi-Chain Strategy</h2>
            <span class="part-subtitle">Scaling & Interoperability</span>
        </div>

        <!-- Section 4.1: Deployment Networks -->
        <section id="deployment-networks" class="part-4-section">
            <h3><span class="section-num part-4">4.1</span>Deployment Networks</h3>

            <h4>Strategic Priorities</h4>
            <div class="grid-3">
                <div class="card">
                    <h4>Low Transaction Fees</h4>
                    <p>Prediction markets require frequent interaction (buying, selling, claiming). Gas must be &lt;
                        $0.01.</p>
                </div>
                <div class="card">
                    <h4>High Liquidity</h4>
                    <p>Deployment on a chain with existing USDC liquidity reduces friction for user onboarding.</p>
                </div>
                <div class="card">
                    <h4>EVM Compatibility</h4>
                    <p>Essential for supporting existing tooling, wallets (MetaMask), and Chainlink services.</p>
                </div>
            </div>

            <div class="box box-warning" style="margin-top: 2rem;">
                <span class="box-title">Why Single Chain Deployment? (Liquidity Concentration)</span>
                <p>We should <strong>NOT</strong> deploy market contracts on multiple chains simultaneously. Prediction
                    markets rely heavily on liquidity depth.</p>
                <ul>
                    <li><strong>Fragmentation:</strong> Splitting liquidity across Polygon and BSC makes order books
                        thin on both.</li>
                    <li><strong>User Experience:</strong> Bettors should meet in one place to match orders efficiently.
                    </li>
                    <li><strong>Operation:</strong> We maintain the "Core" on one chain, and use bridges (CCIP) to let
                        users from other chains participate.</li>
                </ul>
            </div>

            <h4>The Criticality of Gas Fees in Batch Processing</h4>
            <p>For optimal UX, our server will likely <strong>batch process</strong> user actions (e.g., matching 50
                orders in one transaction) to provide instant confirmation and gasless experience for users. This makes
                gas fees a direct <strong>operating cost</strong> for the platform.</p>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Cost on Polygon/BSC (~$0.01)</th>
                            <th>Cost on Arbitrum/Op (~$0.15)</th>
                            <th>Impact</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1 Single Trade</td>
                            <td>$0.01</td>
                            <td>$0.15</td>
                            <td>Manageable</td>
                        </tr>
                        <tr>
                            <td><strong>Daily Batch (10,000 txs)</strong></td>
                            <td><strong>$100 / day</strong></td>
                            <td><strong>$1,500 / day</strong></td>
                            <td><span style="color: var(--danger);">Critical Difference</span></td>
                        </tr>
                        <tr>
                            <td>Monthly Cost</td>
                            <td>$3,000</td>
                            <td>$45,000</td>
                            <td><strong>Business Viability Risk</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p><strong>Conclusion:</strong> If we subsidize gas or run batch processors, L2s like Arbitrum are currently
                too expensive at scale. Polygon or BSC is mandatory for economic viability.</p>

            <h4>Comparative Analysis: L1 vs L2</h4>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Network</th>
                            <th>Gas Fee</th>
                            <th>Pros</th>
                            <th>Cons</th>
                            <th>Verdict</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- L1 / Sidechains -->
                        <tr>
                            <td rowspan="2" style="background: rgba(var(--accent-rgb), 0.05);"><strong>L1 /
                                    Sidechain</strong></td>
                            <td><strong>Polygon PoS</strong></td>
                            <td><span style="color: var(--success); font-weight: 600;">~ $0.001</span></td>
                            <td>
                                <ul>
                                    <li>Extremely low fees</li>
                                    <li>Mature ecosystem</li>
                                    <li><strong>Used by Polymarket (Proven)</strong></li>
                                </ul>
                            </td>
                            <td>Reorg risks (rare now)</td>
                            <td><span class="label label-success">Top Choice</span></td>
                        </tr>
                        <tr>
                            <td><strong>BNB Smart Chain (BSC)</strong></td>
                            <td><span style="color: var(--success); font-weight: 600;">~ $0.03</span></td>
                            <td>
                                <ul>
                                    <li>Huge global user base</li>
                                    <li>Low fees</li>
                                    <li>High liquidity</li>
                                </ul>
                            </td>
                            <td>More centralized validator set</td>
                            <td><span class="label label-success">Top Choice</span></td>
                        </tr>

                        <!-- L2s -->
                        <tr>
                            <td rowspan="2" style="background: rgba(var(--accent-rgb), 0.05);"><strong>Layer 2</strong>
                            </td>
                            <td><strong>Base</strong></td>
                            <td><span style="color: var(--success); font-weight: 600;">&lt; $0.01</span></td>
                            <td>
                                <ul>
                                    <li>Coinbase integration (easy onboarding)</li>
                                    <li>Rapidly growing</li>
                                    <li>EVM equivalent</li>
                                </ul>
                            </td>
                            <td>Newer ecosystem</td>
                            <td><span class="label label-primary">Alternative</span></td>
                        </tr>
                        <tr>
                            <td><strong>Arbitrum One</strong></td>
                            <td><span style="color: var(--warning); font-weight: 600;">~ $0.10</span></td>
                            <td>
                                <ul>
                                    <li>Highest L2 TVL</li>
                                    <li>Deep USDC liquidity</li>
                                </ul>
                            </td>
                            <td>Fees slightly higher than Polygon/BSC</td>
                            <td><span class="label label-primary">Alternative</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h4>Primary Recommendation: Polygon or BSC</h4>
            <p><strong>Polygon PoS</strong> and <strong>BSC</strong> are currently the top candidates for deployment.
                Their combination of extremely low transaction fees, mature ecosystems, and massive global user bases
                makes them ideal for a high-frequency prediction market platform where gas costs must be negligible.</p>

            <div class="box box-success">
                <span class="box-title">Technical Note: Zero Code Change (EVM Portability)</span>
                <p>Because both Polygon and BSC are fully <strong>EVM (Ethereum Virtual Machine) Compatible</strong>,
                    there is <strong>NO risk</strong> of code divergence.</p>
                <ul>
                    <li><strong>Singular Codebase:</strong> We use the exact same Solidity smart contracts for either
                        network.</li>
                    <li><strong>Configuration Only:</strong> The only differences are deployment parameters (e.g., USDC
                        address, Chainlink Oracle address), which are handled by config files, not code changes.</li>
                    <li><strong>Flexibility:</strong> We can switch between them or deploy to the other later with zero
                        engineering overhead.</li>
                </ul>
            </div>
        </section>

        <!-- Section 4.2: Bridging Strategy -->
        <section id="bridging-strategy" class="part-4-section">
            <h3><span class="section-num part-4">4.2</span>Bridging Strategy (CCIP)</h3>

            <h4>Why Bridge?</h4>
            <div class="box box-highlight">
                <span class="box-title">The Liquidity Fragmentation Problem</span>
                <p>Users have funds on Ethereum Mainnet, Optimism, Arbitrum, etc. We don't want to force them to
                    manually bridge to our specific chain using complex 3rd party bridges.</p>
            </div>

            <h4>Solution: Chainlink CCIP (Cross-Chain Interoperability Protocol)</h4>
            <p>CCIP allows us to accept deposits from <em>any</em> supported chain and route them to our specific market
                implementation.</p>

            <div class="diagram">
                <div class="diagram-title">Cross-Chain Betting Flow</div>
                <div style="text-align: center; padding: 1.5rem; font-family: var(--font-mono); line-height: 1.8;">
                    [User on Ethereum Mainnet] <br>
                    â†“ <br>
                    Sends USDC + "Bet on Brazil" Msg via CCIP<br>
                    â†“<br>
                    <strong>Network of Chainlink Nodes</strong> (Secure Transport)<br>
                    â†“<br>
                    [Nostra Contract on Base]<br>
                    Receives USDC â†’ Mints YES Tokens for User
                </div>
            </div>

            <h4>Integration Architecture</h4>
            <div class="grid-2">
                <div class="card">
                    <h4>Source Chain (User)</h4>
                    <ul>
                        <li><strong>Router Contract</strong>: User interacts with this.</li>
                        <li><strong>Function</strong>: `ccipSend(destinationChainSelector, message)`</li>
                        <li><strong>Tokens</strong>: Programmable Token Transfer blocks tokens here and releases on
                            destination.</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>Destination Chain (Nostra)</h4>
                    <ul>
                        <li><strong>CCIP Receiver</strong>: Our contract implements `_ccipReceive`.</li>
                        <li><strong>Logic</strong>:
                            <ol>
                                <li>Verify sender</li>
                                <li>Decode "Bet on Brazil" message</li>
                                <li>Use received USDC to buy positions</li>
                                <li>Credit user address (mapped)</li>
                            </ol>
                        </li>
                    </ul>
                </div>
            </div>

            <h4>Benefits of CCIP</h4>
            <ul>
                <li><strong>Unified Liquidity</strong>: Treat users from all chains as if they are on one.</li>
                <li><strong>Simplified UX</strong>: "Deposit & Bet" in one transaction (abstracting the bridge).</li>
                <li><strong>Security</strong>: Risk Management Network (secondary validation) prevents hacks common in
                    standard bridges.</li>
            </ul>
        </section>

        <footer>
            <p>Nostra Technical Whitepaper | Version 1.0 | December 2025</p>
        </footer>
    </div>
</body>

</html>